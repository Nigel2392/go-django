/*! For license information please see index.js.LICENSE.txt */
(()=>{"use strict";function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function t(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?e(Object(i),!0).forEach(function(e){o(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i.apply(this,arguments)}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function a(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var l=a(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),s=a(/Edge/i),c=a(/firefox/i),d=a(/safari/i)&&!a(/chrome/i)&&!a(/android/i),u=a(/iP(ad|od|hone)/i),p=a(/chrome/i)&&a(/android/i),f={capture:!1,passive:!1};function h(e,t,n){e.addEventListener(t,n,!l&&f)}function m(e,t,n){e.removeEventListener(t,n,!l&&f)}function g(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return!1}return!1}}function v(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function b(e,t,n,o){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&g(e,t):g(e,t))||o&&e===n)return e;if(e===n)break}while(e=v(e))}return null}var y,w=/\s+/g;function x(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var o=(" "+e.className+" ").replace(w," ").replace(" "+t+" "," ");e.className=(o+(n?" "+t:"")).replace(w," ")}}function k(e,t,n){var o=e&&e.style;if(o){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in o||-1!==t.indexOf("webkit")||(t="-webkit-"+t),o[t]=n+("string"==typeof n?"":"px")}}function E(e,t){var n="";if("string"==typeof e)n=e;else do{var o=k(e,"transform");o&&"none"!==o&&(n=o+" "+n)}while(!t&&(e=e.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function C(e,t,n){if(e){var o=e.getElementsByTagName(t),i=0,r=o.length;if(n)for(;i<r;i++)n(o[i],i);return o}return[]}function S(){return document.scrollingElement||document.documentElement}function D(e,t,n,o,i){if(e.getBoundingClientRect||e===window){var r,a,s,c,d,u,p;if(e!==window&&e.parentNode&&e!==S()?(a=(r=e.getBoundingClientRect()).top,s=r.left,c=r.bottom,d=r.right,u=r.height,p=r.width):(a=0,s=0,c=window.innerHeight,d=window.innerWidth,u=window.innerHeight,p=window.innerWidth),(t||n)&&e!==window&&(i=i||e.parentNode,!l))do{if(i&&i.getBoundingClientRect&&("none"!==k(i,"transform")||n&&"static"!==k(i,"position"))){var f=i.getBoundingClientRect();a-=f.top+parseInt(k(i,"border-top-width")),s-=f.left+parseInt(k(i,"border-left-width")),c=a+r.height,d=s+r.width;break}}while(i=i.parentNode);if(o&&e!==window){var h=E(i||e),m=h&&h.a,g=h&&h.d;h&&(c=(a/=g)+(u/=g),d=(s/=m)+(p/=m))}return{top:a,left:s,bottom:c,right:d,width:p,height:u}}}function A(e,t,n){for(var o=M(e,!0),i=D(e)[t];o;){var r=D(o)[n];if(!("top"===n||"left"===n?i>=r:i<=r))return o;if(o===S())break;o=M(o,!1)}return!1}function O(e,t,n,o){for(var i=0,r=0,a=e.children;r<a.length;){if("none"!==a[r].style.display&&a[r]!==Pe.ghost&&(o||a[r]!==Pe.dragged)&&b(a[r],n.draggable,e,!1)){if(i===t)return a[r];i++}r++}return null}function T(e,t){for(var n=e.lastElementChild;n&&(n===Pe.ghost||"none"===k(n,"display")||t&&!g(n,t));)n=n.previousElementSibling;return n||null}function _(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===Pe.clone||t&&!g(e,t)||n++;return n}function I(e){var t=0,n=0,o=S();if(e)do{var i=E(e),r=i.a,a=i.d;t+=e.scrollLeft*r,n+=e.scrollTop*a}while(e!==o&&(e=e.parentNode));return[t,n]}function M(e,t){if(!e||!e.getBoundingClientRect)return S();var n=e,o=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=k(n);if(n.clientWidth<n.scrollWidth&&("auto"==i.overflowX||"scroll"==i.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==i.overflowY||"scroll"==i.overflowY)){if(!n.getBoundingClientRect||n===document.body)return S();if(o||t)return n;o=!0}}}while(n=n.parentNode);return S()}function N(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function L(e,t){return function(){if(!y){var n=arguments;1===n.length?e.call(this,n[0]):e.apply(this,n),y=setTimeout(function(){y=void 0},t)}}}function q(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function B(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function j(e,t){k(e,"position","absolute"),k(e,"top",t.top),k(e,"left",t.left),k(e,"width",t.width),k(e,"height",t.height)}function P(e){k(e,"position",""),k(e,"top",""),k(e,"left",""),k(e,"width",""),k(e,"height","")}function W(e,t,n){var o={};return Array.from(e.children).forEach(function(i){var r,a,l,s;if(b(i,t.draggable,e,!1)&&!i.animated&&i!==n){var c=D(i);o.left=Math.min(null!==(r=o.left)&&void 0!==r?r:1/0,c.left),o.top=Math.min(null!==(a=o.top)&&void 0!==a?a:1/0,c.top),o.right=Math.max(null!==(l=o.right)&&void 0!==l?l:-1/0,c.right),o.bottom=Math.max(null!==(s=o.bottom)&&void 0!==s?s:-1/0,c.bottom)}}),o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}var $="Sortable"+(new Date).getTime();var R=[],V={initializeByDefault:!0},F={mount:function(e){for(var t in V)V.hasOwnProperty(t)&&!(t in e)&&(e[t]=V[t]);R.forEach(function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),R.push(e)},pluginEvent:function(e,n,o){var i=this;this.eventCanceled=!1,o.cancel=function(){i.eventCanceled=!0};var r=e+"Global";R.forEach(function(i){n[i.pluginName]&&(n[i.pluginName][r]&&n[i.pluginName][r](t({sortable:n},o)),n.options[i.pluginName]&&n[i.pluginName][e]&&n[i.pluginName][e](t({sortable:n},o)))})},initializePlugins:function(e,t,n,o){for(var r in R.forEach(function(o){var r=o.pluginName;if(e.options[r]||o.initializeByDefault){var a=new o(e,t,e.options);a.sortable=e,a.options=e.options,e[r]=a,i(n,a.defaults)}}),e.options)if(e.options.hasOwnProperty(r)){var a=this.modifyOption(e,r,e.options[r]);void 0!==a&&(e.options[r]=a)}},getEventProperties:function(e,t){var n={};return R.forEach(function(o){"function"==typeof o.eventProperties&&i(n,o.eventProperties.call(t[o.pluginName],e))}),n},modifyOption:function(e,t,n){var o;return R.forEach(function(i){e[i.pluginName]&&i.optionListeners&&"function"==typeof i.optionListeners[t]&&(o=i.optionListeners[t].call(e[i.pluginName],n))}),o}};function H(e){var n=e.sortable,o=e.rootEl,i=e.name,r=e.targetEl,a=e.cloneEl,c=e.toEl,d=e.fromEl,u=e.oldIndex,p=e.newIndex,f=e.oldDraggableIndex,h=e.newDraggableIndex,m=e.originalEvent,g=e.putSortable,v=e.extraEventProperties;if(n=n||o&&o[$]){var b,y=n.options,w="on"+i.charAt(0).toUpperCase()+i.substr(1);!window.CustomEvent||l||s?(b=document.createEvent("Event")).initEvent(i,!0,!0):b=new CustomEvent(i,{bubbles:!0,cancelable:!0}),b.to=c||o,b.from=d||o,b.item=r||o,b.clone=a,b.oldIndex=u,b.newIndex=p,b.oldDraggableIndex=f,b.newDraggableIndex=h,b.originalEvent=m,b.pullMode=g?g.lastPutMode:void 0;var x=t(t({},v),F.getEventProperties(i,n));for(var k in x)b[k]=x[k];o&&o.dispatchEvent(b),y[w]&&y[w].call(n,b)}}var Y=["evt"],X=function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=o.evt,r=function(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(o,Y);F.pluginEvent.bind(Pe)(e,n,t({dragEl:U,parentEl:K,ghostEl:G,rootEl:J,nextEl:Z,lastDownEl:Q,cloneEl:ee,cloneHidden:te,dragStarted:he,putSortable:le,activeSortable:Pe.active,originalEvent:i,oldIndex:ne,oldDraggableIndex:ie,newIndex:oe,newDraggableIndex:re,hideGhostForTarget:Le,unhideGhostForTarget:qe,cloneNowHidden:function(){te=!0},cloneNowShown:function(){te=!1},dispatchSortableEvent:function(e){z({sortable:n,name:e,originalEvent:i})}},r))};function z(e){H(t({putSortable:le,cloneEl:ee,targetEl:U,rootEl:J,oldIndex:ne,oldDraggableIndex:ie,newIndex:oe,newDraggableIndex:re},e))}var U,K,G,J,Z,Q,ee,te,ne,oe,ie,re,ae,le,se,ce,de,ue,pe,fe,he,me,ge,ve,be,ye=!1,we=!1,xe=[],ke=!1,Ee=!1,Ce=[],Se=!1,De=[],Ae="undefined"!=typeof document,Oe=u,Te=s||l?"cssFloat":"float",_e=Ae&&!p&&!u&&"draggable"in document.createElement("div"),Ie=function(){if(Ae){if(l)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),Me=function(e,t){var n=k(e),o=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=O(e,0,t),r=O(e,1,t),a=i&&k(i),l=r&&k(r),s=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+D(i).width,c=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+D(r).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&a.float&&"none"!==a.float){var d="left"===a.float?"left":"right";return!r||"both"!==l.clear&&l.clear!==d?"horizontal":"vertical"}return i&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||s>=o&&"none"===n[Te]||r&&"none"===n[Te]&&s+c>o)?"vertical":"horizontal"},Ne=function(e){function t(e,n){return function(o,i,r,a){var l=o.options.group.name&&i.options.group.name&&o.options.group.name===i.options.group.name;if(null==e&&(n||l))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"==typeof e)return t(e(o,i,r,a),n)(o,i,r,a);var s=(n?o:i).options.group.name;return!0===e||"string"==typeof e&&e===s||e.join&&e.indexOf(s)>-1}}var o={},i=e.group;i&&"object"==n(i)||(i={name:i}),o.name=i.name,o.checkPull=t(i.pull,!0),o.checkPut=t(i.put),o.revertClone=i.revertClone,e.group=o},Le=function(){!Ie&&G&&k(G,"display","none")},qe=function(){!Ie&&G&&k(G,"display","")};Ae&&!p&&document.addEventListener("click",function(e){if(we)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),we=!1,!1},!0);var Be=function(e){if(U){e=e.touches?e.touches[0]:e;var t=(i=e.clientX,r=e.clientY,xe.some(function(e){var t=e[$].options.emptyInsertThreshold;if(t&&!T(e)){var n=D(e),o=i>=n.left-t&&i<=n.right+t,l=r>=n.top-t&&r<=n.bottom+t;return o&&l?a=e:void 0}}),a);if(t){var n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]=e[o]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[$]._onDragOver(n)}}var i,r,a},je=function(e){U&&U.parentNode[$]._isOutsideThisEl(e.target)};function Pe(e,n){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=n=i({},n),e[$]=this;var o,r,a={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Me(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Pe.supportPointer&&"PointerEvent"in window&&!d,emptyInsertThreshold:5};for(var l in F.initializePlugins(this,e,a),a)!(l in n)&&(n[l]=a[l]);for(var s in Ne(n),this)"_"===s.charAt(0)&&"function"==typeof this[s]&&(this[s]=this[s].bind(this));this.nativeDraggable=!n.forceFallback&&_e,this.nativeDraggable&&(this.options.touchStartThreshold=1),n.supportPointer?h(e,"pointerdown",this._onTapStart):(h(e,"mousedown",this._onTapStart),h(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(h(e,"dragover",this),h(e,"dragenter",this)),xe.push(this.el),n.store&&n.store.get&&this.sort(n.store.get(this)||[]),i(this,(r=[],{captureAnimationState:function(){r=[],this.options.animation&&[].slice.call(this.el.children).forEach(function(e){if("none"!==k(e,"display")&&e!==Pe.ghost){r.push({target:e,rect:D(e)});var n=t({},r[r.length-1].rect);if(e.thisAnimationDuration){var o=E(e,!0);o&&(n.top-=o.f,n.left-=o.e)}e.fromRect=n}})},addAnimationState:function(e){r.push(e)},removeAnimationState:function(e){r.splice(function(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var o in t)if(t.hasOwnProperty(o)&&t[o]===e[n][o])return Number(n);return-1}(r,{target:e}),1)},animateAll:function(e){var t=this;if(!this.options.animation)return clearTimeout(o),void("function"==typeof e&&e());var n=!1,i=0;r.forEach(function(e){var o=0,r=e.target,a=r.fromRect,l=D(r),s=r.prevFromRect,c=r.prevToRect,d=e.rect,u=E(r,!0);u&&(l.top-=u.f,l.left-=u.e),r.toRect=l,r.thisAnimationDuration&&N(s,l)&&!N(a,l)&&(d.top-l.top)/(d.left-l.left)===(a.top-l.top)/(a.left-l.left)&&(o=function(e,t,n,o){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*o.animation}(d,s,c,t.options)),N(l,a)||(r.prevFromRect=a,r.prevToRect=l,o||(o=t.options.animation),t.animate(r,d,l,o)),o&&(n=!0,i=Math.max(i,o),clearTimeout(r.animationResetTimer),r.animationResetTimer=setTimeout(function(){r.animationTime=0,r.prevFromRect=null,r.fromRect=null,r.prevToRect=null,r.thisAnimationDuration=null},o),r.thisAnimationDuration=o)}),clearTimeout(o),n?o=setTimeout(function(){"function"==typeof e&&e()},i):"function"==typeof e&&e(),r=[]},animate:function(e,t,n,o){if(o){k(e,"transition",""),k(e,"transform","");var i=E(this.el),r=i&&i.a,a=i&&i.d,l=(t.left-n.left)/(r||1),s=(t.top-n.top)/(a||1);e.animatingX=!!l,e.animatingY=!!s,k(e,"transform","translate3d("+l+"px,"+s+"px,0)"),this.forRepaintDummy=function(e){return e.offsetWidth}(e),k(e,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),k(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout(function(){k(e,"transition",""),k(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1},o)}}}))}function We(e,t,n,o,i,r,a,c){var d,u,p=e[$],f=p.options.onMove;return!window.CustomEvent||l||s?(d=document.createEvent("Event")).initEvent("move",!0,!0):d=new CustomEvent("move",{bubbles:!0,cancelable:!0}),d.to=t,d.from=e,d.dragged=n,d.draggedRect=o,d.related=i||t,d.relatedRect=r||D(t),d.willInsertAfter=c,d.originalEvent=a,e.dispatchEvent(d),f&&(u=f.call(p,d,a)),u}function $e(e){e.draggable=!1}function Re(){Se=!1}function Ve(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,o=0;n--;)o+=t.charCodeAt(n);return o.toString(36)}function Fe(e){return setTimeout(e,0)}function He(e){return clearTimeout(e)}Pe.prototype={constructor:Pe,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(me=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,U):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,o=this.options,i=o.preventOnFilter,r=e.type,a=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,l=(a||e).target,s=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,c=o.filter;if(function(e){De.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var o=t[n];o.checked&&De.push(o)}}(n),!U&&!(/mousedown|pointerdown/.test(r)&&0!==e.button||o.disabled)&&!s.isContentEditable&&(this.nativeDraggable||!d||!l||"SELECT"!==l.tagName.toUpperCase())&&!((l=b(l,o.draggable,n,!1))&&l.animated||Q===l)){if(ne=_(l),ie=_(l,o.draggable),"function"==typeof c){if(c.call(this,e,l,this))return z({sortable:t,rootEl:s,name:"filter",targetEl:l,toEl:n,fromEl:n}),X("filter",t,{evt:e}),void(i&&e.cancelable&&e.preventDefault())}else if(c&&(c=c.split(",").some(function(o){if(o=b(s,o.trim(),n,!1))return z({sortable:t,rootEl:o,name:"filter",targetEl:l,fromEl:n,toEl:n}),X("filter",t,{evt:e}),!0})))return void(i&&e.cancelable&&e.preventDefault());o.handle&&!b(s,o.handle,n,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,t,n){var o,i=this,r=i.el,a=i.options,d=r.ownerDocument;if(n&&!U&&n.parentNode===r){var u=D(n);if(J=r,K=(U=n).parentNode,Z=U.nextSibling,Q=n,ae=a.group,Pe.dragged=U,se={target:U,clientX:(t||e).clientX,clientY:(t||e).clientY},pe=se.clientX-u.left,fe=se.clientY-u.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,U.style["will-change"]="all",o=function(){X("delayEnded",i,{evt:e}),Pe.eventCanceled?i._onDrop():(i._disableDelayedDragEvents(),!c&&i.nativeDraggable&&(U.draggable=!0),i._triggerDragStart(e,t),z({sortable:i,name:"choose",originalEvent:e}),x(U,a.chosenClass,!0))},a.ignore.split(",").forEach(function(e){C(U,e.trim(),$e)}),h(d,"dragover",Be),h(d,"mousemove",Be),h(d,"touchmove",Be),h(d,"mouseup",i._onDrop),h(d,"touchend",i._onDrop),h(d,"touchcancel",i._onDrop),c&&this.nativeDraggable&&(this.options.touchStartThreshold=4,U.draggable=!0),X("delayStart",this,{evt:e}),!a.delay||a.delayOnTouchOnly&&!t||this.nativeDraggable&&(s||l))o();else{if(Pe.eventCanceled)return void this._onDrop();h(d,"mouseup",i._disableDelayedDrag),h(d,"touchend",i._disableDelayedDrag),h(d,"touchcancel",i._disableDelayedDrag),h(d,"mousemove",i._delayedDragTouchMoveHandler),h(d,"touchmove",i._delayedDragTouchMoveHandler),a.supportPointer&&h(d,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(o,a.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){U&&$e(U),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;m(e,"mouseup",this._disableDelayedDrag),m(e,"touchend",this._disableDelayedDrag),m(e,"touchcancel",this._disableDelayedDrag),m(e,"mousemove",this._delayedDragTouchMoveHandler),m(e,"touchmove",this._delayedDragTouchMoveHandler),m(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?h(document,"pointermove",this._onTouchMove):h(document,t?"touchmove":"mousemove",this._onTouchMove):(h(U,"dragend",this),h(J,"dragstart",this._onDragStart));try{document.selection?Fe(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(e,t){if(ye=!1,J&&U){X("dragStarted",this,{evt:t}),this.nativeDraggable&&h(document,"dragover",je);var n=this.options;!e&&x(U,n.dragClass,!1),x(U,n.ghostClass,!0),Pe.active=this,e&&this._appendGhost(),z({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(ce){this._lastX=ce.clientX,this._lastY=ce.clientY,Le();for(var e=document.elementFromPoint(ce.clientX,ce.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ce.clientX,ce.clientY))!==t;)t=e;if(U.parentNode[$]._isOutsideThisEl(e),t)do{if(t[$]&&t[$]._onDragOver({clientX:ce.clientX,clientY:ce.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break;e=t}while(t=t.parentNode);qe()}},_onTouchMove:function(e){if(se){var t=this.options,n=t.fallbackTolerance,o=t.fallbackOffset,i=e.touches?e.touches[0]:e,r=G&&E(G,!0),a=G&&r&&r.a,l=G&&r&&r.d,s=Oe&&be&&I(be),c=(i.clientX-se.clientX+o.x)/(a||1)+(s?s[0]-Ce[0]:0)/(a||1),d=(i.clientY-se.clientY+o.y)/(l||1)+(s?s[1]-Ce[1]:0)/(l||1);if(!Pe.active&&!ye){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(G){r?(r.e+=c-(de||0),r.f+=d-(ue||0)):r={a:1,b:0,c:0,d:1,e:c,f:d};var u="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");k(G,"webkitTransform",u),k(G,"mozTransform",u),k(G,"msTransform",u),k(G,"transform",u),de=c,ue=d,ce=i}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!G){var e=this.options.fallbackOnBody?document.body:J,t=D(U,!0,Oe,!0,e),n=this.options;if(Oe){for(be=e;"static"===k(be,"position")&&"none"===k(be,"transform")&&be!==document;)be=be.parentNode;be!==document.body&&be!==document.documentElement?(be===document&&(be=S()),t.top+=be.scrollTop,t.left+=be.scrollLeft):be=S(),Ce=I(be)}x(G=U.cloneNode(!0),n.ghostClass,!1),x(G,n.fallbackClass,!0),x(G,n.dragClass,!0),k(G,"transition",""),k(G,"transform",""),k(G,"box-sizing","border-box"),k(G,"margin",0),k(G,"top",t.top),k(G,"left",t.left),k(G,"width",t.width),k(G,"height",t.height),k(G,"opacity","0.8"),k(G,"position",Oe?"absolute":"fixed"),k(G,"zIndex","100000"),k(G,"pointerEvents","none"),Pe.ghost=G,e.appendChild(G),k(G,"transform-origin",pe/parseInt(G.style.width)*100+"% "+fe/parseInt(G.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,o=e.dataTransfer,i=n.options;X("dragStart",this,{evt:e}),Pe.eventCanceled?this._onDrop():(X("setupClone",this),Pe.eventCanceled||((ee=B(U)).removeAttribute("id"),ee.draggable=!1,ee.style["will-change"]="",this._hideClone(),x(ee,this.options.chosenClass,!1),Pe.clone=ee),n.cloneId=Fe(function(){X("clone",n),Pe.eventCanceled||(n.options.removeCloneOnHide||J.insertBefore(ee,U),n._hideClone(),z({sortable:n,name:"clone"}))}),!t&&x(U,i.dragClass,!0),t?(we=!0,n._loopId=setInterval(n._emulateDragOver,50)):(m(document,"mouseup",n._onDrop),m(document,"touchend",n._onDrop),m(document,"touchcancel",n._onDrop),o&&(o.effectAllowed="move",i.setData&&i.setData.call(n,o,U)),h(document,"drop",n),k(U,"transform","translateZ(0)")),ye=!0,n._dragStartId=Fe(n._dragStarted.bind(n,t,e)),h(document,"selectstart",n),he=!0,d&&k(document.body,"user-select","none"))},_onDragOver:function(e){var n,o,i,r,a=this.el,l=e.target,s=this.options,c=s.group,d=Pe.active,u=ae===c,p=s.sort,f=le||d,h=this,m=!1;if(!Se){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),l=b(l,s.draggable,a,!0),R("dragOver"),Pe.eventCanceled)return m;if(U.contains(e.target)||l.animated&&l.animatingX&&l.animatingY||h._ignoreWhileAnimating===l)return F(!1);if(we=!1,d&&!s.disabled&&(u?p||(i=K!==J):le===this||(this.lastPutMode=ae.checkPull(this,d,U,e))&&c.checkPut(this,d,U,e))){if(r="vertical"===this._getDirection(e,l),n=D(U),R("dragOverValid"),Pe.eventCanceled)return m;if(i)return K=J,V(),this._hideClone(),R("revert"),Pe.eventCanceled||(Z?J.insertBefore(U,Z):J.appendChild(U)),F(!0);var g=T(a,s.draggable);if(!g||function(e,t,n){var o=D(T(n.el,n.options.draggable)),i=W(n.el,n.options,G);return t?e.clientX>i.right+10||e.clientY>o.bottom&&e.clientX>o.left:e.clientY>i.bottom+10||e.clientX>o.right&&e.clientY>o.top}(e,r,this)&&!g.animated){if(g===U)return F(!1);if(g&&a===e.target&&(l=g),l&&(o=D(l)),!1!==We(J,a,U,n,l,o,e,!!l))return V(),g&&g.nextSibling?a.insertBefore(U,g.nextSibling):a.appendChild(U),K=a,H(),F(!0)}else if(g&&function(e,t,n){var o=D(O(n.el,0,n.options,!0)),i=W(n.el,n.options,G);return t?e.clientX<i.left-10||e.clientY<o.top&&e.clientX<o.right:e.clientY<i.top-10||e.clientY<o.bottom&&e.clientX<o.left}(e,r,this)){var v=O(a,0,s,!0);if(v===U)return F(!1);if(o=D(l=v),!1!==We(J,a,U,n,l,o,e,!1))return V(),a.insertBefore(U,v),K=a,H(),F(!0)}else if(l.parentNode===a){o=D(l);var y,w,E,C=U.parentNode!==a,S=!function(e,t,n){var o=n?e.left:e.top,i=n?e.right:e.bottom,r=n?e.width:e.height,a=n?t.left:t.top,l=n?t.right:t.bottom,s=n?t.width:t.height;return o===a||i===l||o+r/2===a+s/2}(U.animated&&U.toRect||n,l.animated&&l.toRect||o,r),I=r?"top":"left",M=A(l,"top","top")||A(U,"top","top"),N=M?M.scrollTop:void 0;if(me!==l&&(w=o[I],ke=!1,Ee=!S&&s.invertSwap||C),y=function(e,t,n,o,i,r,a,l){var s=o?e.clientY:e.clientX,c=o?n.height:n.width,d=o?n.top:n.left,u=o?n.bottom:n.right,p=!1;if(!a)if(l&&ve<c*i){if(!ke&&(1===ge?s>d+c*r/2:s<u-c*r/2)&&(ke=!0),ke)p=!0;else if(1===ge?s<d+ve:s>u-ve)return-ge}else if(s>d+c*(1-i)/2&&s<u-c*(1-i)/2)return function(e){return _(U)<_(e)?1:-1}(t);return(p=p||a)&&(s<d+c*r/2||s>u-c*r/2)?s>d+c/2?1:-1:0}(e,l,o,r,S?1:s.swapThreshold,null==s.invertedSwapThreshold?s.swapThreshold:s.invertedSwapThreshold,Ee,me===l),0!==y){var L=_(U);do{L-=y,E=K.children[L]}while(E&&("none"===k(E,"display")||E===G))}if(0===y||E===l)return F(!1);me=l,ge=y;var B=l.nextElementSibling,j=!1,P=We(J,a,U,n,l,o,e,j=1===y);if(!1!==P)return 1!==P&&-1!==P||(j=1===P),Se=!0,setTimeout(Re,30),V(),j&&!B?a.appendChild(U):l.parentNode.insertBefore(U,j?B:l),M&&q(M,0,N-M.scrollTop),K=U.parentNode,void 0===w||Ee||(ve=Math.abs(w-D(l)[I])),H(),F(!0)}if(a.contains(U))return F(!1)}return!1}function R(s,c){X(s,h,t({evt:e,isOwner:u,axis:r?"vertical":"horizontal",revert:i,dragRect:n,targetRect:o,canSort:p,fromSortable:f,target:l,completed:F,onMove:function(t,o){return We(J,a,U,n,t,D(t),e,o)},changed:H},c))}function V(){R("dragOverAnimationCapture"),h.captureAnimationState(),h!==f&&f.captureAnimationState()}function F(t){return R("dragOverCompleted",{insertion:t}),t&&(u?d._hideClone():d._showClone(h),h!==f&&(x(U,le?le.options.ghostClass:d.options.ghostClass,!1),x(U,s.ghostClass,!0)),le!==h&&h!==Pe.active?le=h:h===Pe.active&&le&&(le=null),f===h&&(h._ignoreWhileAnimating=l),h.animateAll(function(){R("dragOverAnimationComplete"),h._ignoreWhileAnimating=null}),h!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(l===U&&!U.animated||l===a&&!l.animated)&&(me=null),s.dragoverBubble||e.rootEl||l===document||(U.parentNode[$]._isOutsideThisEl(e.target),!t&&Be(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),m=!0}function H(){oe=_(U),re=_(U,s.draggable),z({sortable:h,name:"change",toEl:a,newIndex:oe,newDraggableIndex:re,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){m(document,"mousemove",this._onTouchMove),m(document,"touchmove",this._onTouchMove),m(document,"pointermove",this._onTouchMove),m(document,"dragover",Be),m(document,"mousemove",Be),m(document,"touchmove",Be)},_offUpEvents:function(){var e=this.el.ownerDocument;m(e,"mouseup",this._onDrop),m(e,"touchend",this._onDrop),m(e,"pointerup",this._onDrop),m(e,"touchcancel",this._onDrop),m(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;oe=_(U),re=_(U,n.draggable),X("drop",this,{evt:e}),K=U&&U.parentNode,oe=_(U),re=_(U,n.draggable),Pe.eventCanceled||(ye=!1,Ee=!1,ke=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),He(this.cloneId),He(this._dragStartId),this.nativeDraggable&&(m(document,"drop",this),m(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),d&&k(document.body,"user-select",""),k(U,"transform",""),e&&(he&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),G&&G.parentNode&&G.parentNode.removeChild(G),(J===K||le&&"clone"!==le.lastPutMode)&&ee&&ee.parentNode&&ee.parentNode.removeChild(ee),U&&(this.nativeDraggable&&m(U,"dragend",this),$e(U),U.style["will-change"]="",he&&!ye&&x(U,le?le.options.ghostClass:this.options.ghostClass,!1),x(U,this.options.chosenClass,!1),z({sortable:this,name:"unchoose",toEl:K,newIndex:null,newDraggableIndex:null,originalEvent:e}),J!==K?(oe>=0&&(z({rootEl:K,name:"add",toEl:K,fromEl:J,originalEvent:e}),z({sortable:this,name:"remove",toEl:K,originalEvent:e}),z({rootEl:K,name:"sort",toEl:K,fromEl:J,originalEvent:e}),z({sortable:this,name:"sort",toEl:K,originalEvent:e})),le&&le.save()):oe!==ne&&oe>=0&&(z({sortable:this,name:"update",toEl:K,originalEvent:e}),z({sortable:this,name:"sort",toEl:K,originalEvent:e})),Pe.active&&(null!=oe&&-1!==oe||(oe=ne,re=ie),z({sortable:this,name:"end",toEl:K,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){X("nulling",this),J=U=K=G=Z=ee=Q=te=se=ce=he=oe=re=ne=ie=me=ge=le=ae=Pe.dragged=Pe.ghost=Pe.clone=Pe.active=null,De.forEach(function(e){e.checked=!0}),De.length=de=ue=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":U&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,o=0,i=n.length,r=this.options;o<i;o++)b(e=n[o],r.draggable,this.el,!1)&&t.push(e.getAttribute(r.dataIdAttr)||Ve(e));return t},sort:function(e,t){var n={},o=this.el;this.toArray().forEach(function(e,t){var i=o.children[t];b(i,this.options.draggable,o,!1)&&(n[e]=i)},this),t&&this.captureAnimationState(),e.forEach(function(e){n[e]&&(o.removeChild(n[e]),o.appendChild(n[e]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return b(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var o=F.modifyOption(this,e,t);n[e]=void 0!==o?o:t,"group"===e&&Ne(n)},destroy:function(){X("destroy",this);var e=this.el;e[$]=null,m(e,"mousedown",this._onTapStart),m(e,"touchstart",this._onTapStart),m(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(m(e,"dragover",this),m(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),xe.splice(xe.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!te){if(X("hideClone",this),Pe.eventCanceled)return;k(ee,"display","none"),this.options.removeCloneOnHide&&ee.parentNode&&ee.parentNode.removeChild(ee),te=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(te){if(X("showClone",this),Pe.eventCanceled)return;U.parentNode!=J||this.options.group.revertClone?Z?J.insertBefore(ee,Z):J.appendChild(ee):J.insertBefore(ee,U),this.options.group.revertClone&&this.animate(U,ee),k(ee,"display",""),te=!1}}else this._hideClone()}},Ae&&h(document,"touchmove",function(e){(Pe.active||ye)&&e.cancelable&&e.preventDefault()}),Pe.utils={on:h,off:m,css:k,find:C,is:function(e,t){return!!b(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},throttle:L,closest:b,toggleClass:x,clone:B,index:_,nextTick:Fe,cancelNextTick:He,detectDirection:Me,getChild:O},Pe.get=function(e){return e[$]},Pe.mount=function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];n[0].constructor===Array&&(n=n[0]),n.forEach(function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(Pe.utils=t(t({},Pe.utils),e.utils)),F.mount(e)})},Pe.create=function(e,t){return new Pe(e,t)},Pe.version="1.15.2";var Ye,Xe,ze,Ue,Ke,Ge,Je=[],Ze=!1;function Qe(){Je.forEach(function(e){clearInterval(e.pid)}),Je=[]}function et(){clearInterval(Ge)}var tt=L(function(e,t,n,o){if(t.scroll){var i,r=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,l=t.scrollSensitivity,s=t.scrollSpeed,c=S(),d=!1;Xe!==n&&(Xe=n,Qe(),Ye=t.scroll,i=t.scrollFn,!0===Ye&&(Ye=M(n,!0)));var u=0,p=Ye;do{var f=p,h=D(f),m=h.top,g=h.bottom,v=h.left,b=h.right,y=h.width,w=h.height,x=void 0,E=void 0,C=f.scrollWidth,A=f.scrollHeight,O=k(f),T=f.scrollLeft,_=f.scrollTop;f===c?(x=y<C&&("auto"===O.overflowX||"scroll"===O.overflowX||"visible"===O.overflowX),E=w<A&&("auto"===O.overflowY||"scroll"===O.overflowY||"visible"===O.overflowY)):(x=y<C&&("auto"===O.overflowX||"scroll"===O.overflowX),E=w<A&&("auto"===O.overflowY||"scroll"===O.overflowY));var I=x&&(Math.abs(b-r)<=l&&T+y<C)-(Math.abs(v-r)<=l&&!!T),N=E&&(Math.abs(g-a)<=l&&_+w<A)-(Math.abs(m-a)<=l&&!!_);if(!Je[u])for(var L=0;L<=u;L++)Je[L]||(Je[L]={});Je[u].vx==I&&Je[u].vy==N&&Je[u].el===f||(Je[u].el=f,Je[u].vx=I,Je[u].vy=N,clearInterval(Je[u].pid),0==I&&0==N||(d=!0,Je[u].pid=setInterval(function(){o&&0===this.layer&&Pe.active._onTouchMove(Ke);var t=Je[this.layer].vy?Je[this.layer].vy*s:0,n=Je[this.layer].vx?Je[this.layer].vx*s:0;"function"==typeof i&&"continue"!==i.call(Pe.dragged.parentNode[$],n,t,e,Ke,Je[this.layer].el)||q(Je[this.layer].el,n,t)}.bind({layer:u}),24))),u++}while(t.bubbleScroll&&p!==c&&(p=M(p,!1)));Ze=d}},30),nt=function(e){var t=e.originalEvent,n=e.putSortable,o=e.dragEl,i=e.activeSortable,r=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(t){var s=n||i;a();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,d=document.elementFromPoint(c.clientX,c.clientY);l(),s&&!s.el.contains(d)&&(r("spill"),this.onSpill({dragEl:o,putSortable:n}))}};function ot(){}function it(){}ot.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var o=O(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(t,o):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:nt},i(ot,{pluginName:"revertOnSpill"}),it.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:nt},i(it,{pluginName:"removeOnSpill"});var rt,at,lt,st,ct,dt=[],ut=[],pt=!1,ft=!1,ht=!1;function mt(e,t){ut.forEach(function(n,o){var i=t.children[n.sortableIndex+(e?Number(o):0)];i?t.insertBefore(n,i):t.appendChild(n)})}function gt(){dt.forEach(function(e){e!==lt&&e.parentNode&&e.parentNode.removeChild(e)})}Pe.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?h(document,"dragover",this._handleAutoScroll):this.options.supportPointer?h(document,"pointermove",this._handleFallbackAutoScroll):t.touches?h(document,"touchmove",this._handleFallbackAutoScroll):h(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?m(document,"dragover",this._handleAutoScroll):(m(document,"pointermove",this._handleFallbackAutoScroll),m(document,"touchmove",this._handleFallbackAutoScroll),m(document,"mousemove",this._handleFallbackAutoScroll)),et(),Qe(),clearTimeout(y),y=void 0},nulling:function(){Ke=Xe=Ye=Ze=Ge=ze=Ue=null,Je.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,o=(e.touches?e.touches[0]:e).clientX,i=(e.touches?e.touches[0]:e).clientY,r=document.elementFromPoint(o,i);if(Ke=e,t||this.options.forceAutoScrollFallback||s||l||d){tt(e,this.options,r,t);var a=M(r,!0);!Ze||Ge&&o===ze&&i===Ue||(Ge&&et(),Ge=setInterval(function(){var r=M(document.elementFromPoint(o,i),!0);r!==a&&(a=r,Qe()),tt(e,n.options,r,t)},10),ze=o,Ue=i)}else{if(!this.options.bubbleScroll||M(r,!0)===S())return void Qe();tt(e,this.options,M(r,!1),!1)}}},i(e,{pluginName:"scroll",initializeByDefault:!0})}),Pe.mount(it,ot);const vt=Pe;vt.mount(new function(){function e(e){for(var t in this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this));e.options.avoidImplicitDeselect||(e.options.supportPointer?h(document,"pointerup",this._deselectMultiDrag):(h(document,"mouseup",this._deselectMultiDrag),h(document,"touchend",this._deselectMultiDrag))),h(document,"keydown",this._checkKeyDown),h(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,avoidImplicitDeselect:!1,setData:function(t,n){var o="";dt.length&&at===e?dt.forEach(function(e,t){o+=(t?", ":"")+e.textContent}):o=n.textContent,t.setData("Text",o)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(e){var t=e.dragEl;lt=t},delayEnded:function(){this.isMultiDrag=~dt.indexOf(lt)},setupClone:function(e){var t=e.sortable,n=e.cancel;if(this.isMultiDrag){for(var o=0;o<dt.length;o++)ut.push(B(dt[o])),ut[o].sortableIndex=dt[o].sortableIndex,ut[o].draggable=!1,ut[o].style["will-change"]="",x(ut[o],this.options.selectedClass,!1),dt[o]===lt&&x(ut[o],this.options.chosenClass,!1);t._hideClone(),n()}},clone:function(e){var t=e.sortable,n=e.rootEl,o=e.dispatchSortableEvent,i=e.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||dt.length&&at===t&&(mt(!0,n),o("clone"),i()))},showClone:function(e){var t=e.cloneNowShown,n=e.rootEl,o=e.cancel;this.isMultiDrag&&(mt(!1,n),ut.forEach(function(e){k(e,"display","")}),t(),ct=!1,o())},hideClone:function(e){var t=this,n=(e.sortable,e.cloneNowHidden),o=e.cancel;this.isMultiDrag&&(ut.forEach(function(e){k(e,"display","none"),t.options.removeCloneOnHide&&e.parentNode&&e.parentNode.removeChild(e)}),n(),ct=!0,o())},dragStartGlobal:function(e){e.sortable,!this.isMultiDrag&&at&&at.multiDrag._deselectMultiDrag(),dt.forEach(function(e){e.sortableIndex=_(e)}),dt=dt.sort(function(e,t){return e.sortableIndex-t.sortableIndex}),ht=!0},dragStarted:function(e){var t=this,n=e.sortable;if(this.isMultiDrag){if(this.options.sort&&(n.captureAnimationState(),this.options.animation)){dt.forEach(function(e){e!==lt&&k(e,"position","absolute")});var o=D(lt,!1,!0,!0);dt.forEach(function(e){e!==lt&&j(e,o)}),ft=!0,pt=!0}n.animateAll(function(){ft=!1,pt=!1,t.options.animation&&dt.forEach(function(e){P(e)}),t.options.sort&&gt()})}},dragOver:function(e){var t=e.target,n=e.completed,o=e.cancel;ft&&~dt.indexOf(t)&&(n(!1),o())},revert:function(e){var t=e.fromSortable,n=e.rootEl,o=e.sortable,i=e.dragRect;dt.length>1&&(dt.forEach(function(e){o.addAnimationState({target:e,rect:ft?D(e):i}),P(e),e.fromRect=i,t.removeAnimationState(e)}),ft=!1,function(e,t){dt.forEach(function(n,o){var i=t.children[n.sortableIndex+(e?Number(o):0)];i?t.insertBefore(n,i):t.appendChild(n)})}(!this.options.removeCloneOnHide,n))},dragOverCompleted:function(e){var t=e.sortable,n=e.isOwner,o=e.insertion,i=e.activeSortable,r=e.parentEl,a=e.putSortable,l=this.options;if(o){if(n&&i._hideClone(),pt=!1,l.animation&&dt.length>1&&(ft||!n&&!i.options.sort&&!a)){var s=D(lt,!1,!0,!0);dt.forEach(function(e){e!==lt&&(j(e,s),r.appendChild(e))}),ft=!0}if(!n)if(ft||gt(),dt.length>1){var c=ct;i._showClone(t),i.options.animation&&!ct&&c&&ut.forEach(function(e){i.addAnimationState({target:e,rect:st}),e.fromRect=st,e.thisAnimationDuration=null})}else i._showClone(t)}},dragOverAnimationCapture:function(e){var t=e.dragRect,n=e.isOwner,o=e.activeSortable;if(dt.forEach(function(e){e.thisAnimationDuration=null}),o.options.animation&&!n&&o.multiDrag.isMultiDrag){st=i({},t);var r=E(lt,!0);st.top-=r.f,st.left-=r.e}},dragOverAnimationComplete:function(){ft&&(ft=!1,gt())},drop:function(e){var t=e.originalEvent,n=e.rootEl,o=e.parentEl,i=e.sortable,r=e.dispatchSortableEvent,a=e.oldIndex,l=e.putSortable,s=l||this.sortable;if(t){var c=this.options,d=o.children;if(!ht)if(c.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),x(lt,c.selectedClass,!~dt.indexOf(lt)),~dt.indexOf(lt))dt.splice(dt.indexOf(lt),1),rt=null,H({sortable:i,rootEl:n,name:"deselect",targetEl:lt,originalEvent:t});else{if(dt.push(lt),H({sortable:i,rootEl:n,name:"select",targetEl:lt,originalEvent:t}),t.shiftKey&&rt&&i.el.contains(rt)){var u,p,f=_(rt),h=_(lt);if(~f&&~h&&f!==h)for(h>f?(p=f,u=h):(p=h,u=f+1);p<u;p++)~dt.indexOf(d[p])||(x(d[p],c.selectedClass,!0),dt.push(d[p]),H({sortable:i,rootEl:n,name:"select",targetEl:d[p],originalEvent:t}))}else rt=lt;at=s}if(ht&&this.isMultiDrag){if(ft=!1,(o[$].options.sort||o!==n)&&dt.length>1){var m=D(lt),g=_(lt,":not(."+this.options.selectedClass+")");if(!pt&&c.animation&&(lt.thisAnimationDuration=null),s.captureAnimationState(),!pt&&(c.animation&&(lt.fromRect=m,dt.forEach(function(e){if(e.thisAnimationDuration=null,e!==lt){var t=ft?D(e):m;e.fromRect=t,s.addAnimationState({target:e,rect:t})}})),gt(),dt.forEach(function(e){d[g]?o.insertBefore(e,d[g]):o.appendChild(e),g++}),a===_(lt))){var v=!1;dt.forEach(function(e){e.sortableIndex===_(e)||(v=!0)}),v&&(r("update"),r("sort"))}dt.forEach(function(e){P(e)}),s.animateAll()}at=s}(n===o||l&&"clone"!==l.lastPutMode)&&ut.forEach(function(e){e.parentNode&&e.parentNode.removeChild(e)})}},nullingGlobal:function(){this.isMultiDrag=ht=!1,ut.length=0},destroyGlobal:function(){this._deselectMultiDrag(),m(document,"pointerup",this._deselectMultiDrag),m(document,"mouseup",this._deselectMultiDrag),m(document,"touchend",this._deselectMultiDrag),m(document,"keydown",this._checkKeyDown),m(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(e){if(!(void 0!==ht&&ht||at!==this.sortable||e&&b(e.target,this.options.draggable,this.sortable.el,!1)||e&&0!==e.button))for(;dt.length;){var t=dt[0];x(t,this.options.selectedClass,!1),dt.shift(),H({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:t,originalEvent:e})}},_checkKeyDown:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},i(e,{pluginName:"multiDrag",utils:{select:function(e){var t=e.parentNode[$];t&&t.options.multiDrag&&!~dt.indexOf(e)&&(at&&at!==t&&(at.multiDrag._deselectMultiDrag(),at=t),x(e,t.options.selectedClass,!0),dt.push(e))},deselect:function(e){var t=e.parentNode[$],n=dt.indexOf(e);t&&t.options.multiDrag&&~n&&(x(e,t.options.selectedClass,!1),dt.splice(n,1))}},eventProperties:function(){var e,t=this,n=[],o=[];return dt.forEach(function(e){var i;n.push({multiDragElement:e,index:e.sortableIndex}),i=ft&&e!==lt?-1:ft?_(e,":not(."+t.options.selectedClass+")"):_(e),o.push({multiDragElement:e,index:i})}),{items:(e=dt,function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),clones:[].concat(ut),oldIndicies:n,newIndicies:o}},optionListeners:{multiDragKey:function(e){return"ctrl"===(e=e.toLowerCase())?e="Control":e.length>1&&(e=e.charAt(0).toUpperCase()+e.substr(1)),e}}})});class bt extends window.StimulusController{get sortableConfig(){return{multiDrag:!0,selectedClass:"sort-selected",handle:this.handleValue,animation:150,swapThreshold:1,draggable:this.draggableValue,onEnd:e=>{this.reOrderItems()}}}connect(){this.hasItemsTarget?this.sortable=vt.create(this.itemsTarget,this.sortableConfig):console.error("SortableController: No items target found")}itemsTargetConnected(e){"connected"!==e.dataset.sortable&&(this.sortable&&this.sortable.destroy(),e.dataset.sortable="connected",this.sortable=vt.create(e,this.sortableConfig))}moveItem(e,t){const n=this.itemTargets.filter(e=>"none"!==e.style.display),o=n.indexOf(e);if(-1===o)return void console.error("SortableController: Item not found in items target");let i=!0;if("up"===t&&o>0){const t=n[o-1];this.itemsTarget.insertBefore(e,t)}else if("down"===t&&o<n.length-1){const t=n[o+1].nextSibling;this.itemsTarget.insertBefore(e,t)}else i=!1;i&&this.reOrderItems()}itemTargetConnected(e){this.reOrderItems()}replaceValues(){return this.replaceValue.split(";")}reOrderItems(){for(var e=this.replaceValues(),t=this.itemTargets.filter(e=>"none"!==e.style.display),n=0;n<t.length;n++){var o=t[n],i=o.dataset.replace;i&&(e=i.split(";"));for(var r=0;r<e.length;r++){var a=e[r];let t=n;if(a.endsWith("+")&&(a=a.slice(0,-1),t=n+1),a.startsWith("[")&&a.endsWith("]"))if((a=a.slice(1,-1)).startsWith("data-")){var l=a.slice(5);o.dataset[l]=t.toString()}else o.setAttribute(a,t.toString());else{var s=o.querySelector(a);s?s instanceof HTMLInputElement?s.value=t.toString():s.textContent=t.toString():console.error("Could not find element with selector",a)}}}}}bt.targets=["item","items"],bt.values={replace:String,handle:{type:String,default:".sequence-block-field-drag-handle"},draggable:{type:String,default:".sequence-block-field"}};class yt extends window.StimulusController{static registerClass(e,t){this.classRegistry[t]=e}get classArgs(){return this.hasClassArgsValue?(this._classArgs||(this._classArgs=JSON.parse(this.classArgsValue)),this._classArgs):{}}connect(){const e=this.constructor;if(this.classPathValue in e.classRegistry){const t=e.classRegistry[this.classPathValue],n=this.initializeClass(t),o=this.element;o[`${this.identifier}Class`]=n,o[`${this.identifier}Controller`]=this}else console.error(`Class ${this.classPathValue} not found in registered classes`)}initializeClass(e){return new e(this.classArgs)}}yt.classRegistry={},yt.values={classPath:String,classArgs:String};class wt extends yt{constructor(...e){return super(...e),new Proxy(this,{get:(e,t,n)=>{const o=Reflect.get(e,t,n);if(void 0!==o)return o;if("string"==typeof t&&t.startsWith("block")){const n=t.slice(5),o=n.charAt(0).toLowerCase()+n.slice(1);return(...t)=>{const n=e.element.blocks,i=n.bound[o];if("function"==typeof i)return i.apply(n.bound,t);console.warn(`[BlockController] No block method '${o}' found on`,n.bound)}}return o}})}initializeClass(e){if(this.element.classList.contains("block-initiated"))return null;this.element.classList.add("block-initiated");const t=window.telepath.unpack(this.classArgs),n=t.render(this.element,this.idValue,...this.argumentsValue);return this.element.blocks={block:t,bound:n},n}}wt.values=Object.assign(Object.assign({},yt.values),{id:String,arguments:Array});class xt{constructor(e,t,n){this.block=e,this.name=t,this.element=n}getLabel(){throw new Error("Method not implemented.")}getState(){throw new Error("Method not implemented.")}getError(){throw new Error("Method not implemented.")}setState(e){throw new Error("Method not implemented.")}setError(e){throw new Error("Method not implemented.")}}class kt{render(e,t,...n){throw new Error("Method not implemented.")}}const Et=new Set(["svg","path","circle","rect","g","defs","clipPath","use","line","polygon","polyline","ellipse","text","tspan","marker","pattern","mask","symbol","view"]);function Ct(e,t,...n){if("function"==typeof e)return e(null!=t?t:{},n);const o=Et.has(e),i=o?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);if(t)for(const[e,n]of Object.entries(t))if("class"===e)i.setAttribute("class",n);else if("style"===e&&"object"==typeof n)Object.assign(i.style,n);else if(e.startsWith("on")&&"function"==typeof n){const t=e.slice(2).toLowerCase();i.addEventListener(t,n)}else o?i.setAttribute(e,n):e in i?i[e]=n:i.setAttribute(e,n);const r=e=>{null!=e&&!1!==e&&!0!==e&&("string"==typeof e?i.appendChild(document.createTextNode(e)):e instanceof Node?i.appendChild(e):Array.isArray(e)?e.forEach(r):console.warn("Invalid child type:",e))};return n.forEach(r),i}function St(e,t={}){const n="http://www.w3.org/2000/svg",o=document.createElementNS(n,"svg");o.setAttribute("class",`icon ${e}`);const i=document.createElementNS(n,"use");i.setAttributeNS("http://www.w3.org/1999/xlink","href",`#${e}`),o.appendChild(i);for(const n in t)"class"==n?o.setAttribute(n,`icon ${e} ${t[n]}`):o.setAttribute(n,t[n]);return o}function Dt(...e){return Ct("div",{class:"panel__body","data-panel-target":"content"},e)}function At(e){return null==e||"string"==typeof e&&""===e.trim()||!(!Array.isArray(e)||0!==e.length)}function Ot(e){const{class:t,panelId:n,hidden:o,allowPanelLink:i,inputId:r,attrs:a,heading:l,helpText:s,errors:c,children:d}=e,u=Ct("div",Object.assign({},function(e,t){const n=Object.assign({},e||{}),o=["panel","collapsible"];n.class&&o.push(n.class),(null==t?void 0:t.class)&&o.push(t.class);let i=n["data-controller"]||"";return i?i.split(" ").includes("panel")||(i+=" panel"):i="panel",n["data-controller"]=i,(null==t?void 0:t.panelId)&&(n["data-panel-panel-value"]=t.panelId),(null==t?void 0:t.inputId)&&(n["data-panel-input-id"]=t.inputId),(null==t?void 0:t.hidden)&&o.push("collapsed"),n.class=o.join(" "),n}(a,{panelId:n,inputId:r,hidden:o,class:t}))),p=o||At(l)?null:function(e,t=!0,...n){return Ct("div",{class:"panel__heading","data-panel-target":"heading"},e&&t?Ct("a",{class:"panel__icon","data-panel-target":"linkIcon",href:`#${e}`},St("icon-link",{class:"link-logo"})):null,Ct("div",Object.assign({class:"panel__title","data-action":"click->panel#toggle"},e?{id:e}:{}),...n))}(n,!1!==i,l),f=function(e,...t){if(!e||Array.isArray(e)&&0===e.length)return null;const n=Ct("div",{class:"panel__errors"});if(e instanceof HTMLElement)n.appendChild(e);else if(Array.isArray(e))e.forEach(e=>{const t=Ct("li",{class:"panel__error"},e instanceof Error?e.message:String(e));n.appendChild(t)});else{const t=Ct("li",{class:"panel__error"},e instanceof Error?e.message:String(e));n.appendChild(t)}for(const e of t)n.appendChild(e);return n}(c),h=o||At(s)||null==(m=s)?null:Ct("div",{class:"panel__help"},"function"==typeof m?m():m);var m;const g=Array.isArray(d)?Dt(...d):Dt(d);return u.opts=e,p&&(u.heading=u.appendChild(p)),h&&(u.helpText=u.appendChild(h)),f&&(u.errors=u.appendChild(f)),u.body=u.appendChild(g),u.toggle=function(){const e=window.Stimulus.getControllerForElementAndIdentifier(this,"panel");e&&e.toggle()},u.show=function(){const e=window.Stimulus.getControllerForElementAndIdentifier(this,"panel");e&&e.collapse(!1)},u.hide=function(){const e=window.Stimulus.getControllerForElementAndIdentifier(this,"panel");e&&e.collapse(!0)},u}class Tt{constructor(e={duration:300,easing:"ease"}){this.options=e,e.elements?e.elements instanceof HTMLElement?this.elements=[e.elements]:this.elements=e.elements:this.elements=[]}addElement(...e){e.forEach(e=>{var t,n;null===(n=(t=this.options).onAdded)||void 0===n||n.call(t,e)}),this.elements.push(...e)}start(){this.elements.forEach(e=>{var t,n;null===(n=(t=this.options).onStart)||void 0===n||n.call(t,e),requestAnimationFrame(()=>{e.animate([Object.assign({height:"0px"},this.options.animFrom),Object.assign({height:`${e.offsetHeight}px`},this.options.animTo)],{duration:this.options.duration||300,easing:this.options.easing||"ease",fill:"none"}).onfinish=()=>{var t,n;null===(n=(t=this.options).onFinished)||void 0===n||n.call(t,e)}})})}}function _t(e,t={color:"red",duration:200,iters:2,delay:0}){e&&e.animate([{boxShadow:`0 0 0px ${t.color}`},{boxShadow:`0 0 10px ${t.color}`},{boxShadow:`0 0 0px ${t.color}`}],{duration:t.duration,easing:"linear",fill:"none",iterations:t.iters,delay:t.delay,direction:"alternate"})}const It={"data-controller":!0,class:!0,style:!0};function Mt(e,t,n){const o={};for(let n=0;n<e.attributes.length;n++)t(e.attributes[n].name)||It[e.attributes[n].name]||(o[e.attributes[n].name]=e.attributes[n].value);Object.keys(o).forEach(e=>{n(e,o[e])})}class Nt extends xt{constructor(e,t,n,o,i,r){var a,l,s;i=i||[];let c=null;(r=r||{})&&(null==r?void 0:r.nonBlockErrors)&&(c=Ct("ul",{class:"field-errors"},null===(a=null==r?void 0:r.nonBlockErrors)||void 0===a?void 0:a.map(e=>Ct("li",{class:"field-error"},e))));const d=Ot({panelId:`${n}--panel`,class:"sequence-block",allowPanelLink:!0,heading:e.meta.label?Ct("div",{class:"sequence-block-field-heading"},Ct("label",{for:o,class:"sequence-block-field-heading-label"},e.meta.label,":")):null,helpText:e.meta.helpText?Ct("div",{class:"field-help"},e.meta.helpText):null,errors:c,attrs:{"data-controller":"sortable"}});Mt(t,d.hasAttribute.bind(d),d.body.setAttribute.bind(d.body)),t.replaceWith(d),super(e,n,d),this.items=[],this.id=o,d.body.appendChild(Ct("button",{type:"button","data-action":"add",class:"sequence-block-add-button",onClick:this._onAddClick.bind(this,null)},St("icon-plus",{title:window.i18n.gettext("Add %s",this.block.meta.label||window.i18n.gettext("item"))}))),this.totalInput=d.body.appendChild(Ct("input",{type:"hidden","data-sequence-block-total":!0,name:`${n}--total`,value:String(i.length||0)})),this.itemWrapper=d.body.appendChild(Ct("div",{"data-sequence-block-items":!0,class:"sequence-block-items","data-sortable-target":"items"}));for(let e=0;e<i.length;e++)this._createChild(e,e,o,n,i[e],(null===(s=null===(l=null==r?void 0:r.errors)||void 0===l?void 0:l[e])||void 0===s?void 0:s[0])||null,!1);this.activeItems=this.items.length}move(e,t,n){null==n||n.preventDefault();const o=`#${e}--block`,i=this.itemWrapper.querySelector(o);if(!i)return void console.warn("Couldn't find item to move",o);const r=window.Stimulus.getControllerForElementAndIdentifier(this.element,"sortable");r?r.moveItem(i,t):console.warn("Couldn't find sortable controller for list block",this.element)}_createChild(e,t,n,o,i,r,a=!0){let l=null;a&&(l=new Tt({duration:300,onAdded:e=>{e.style.transition="opacity 300ms ease"},onFinished:e=>{e.style.transition="",e.style||e.removeAttribute("style")},animFrom:{opacity:"0"},animTo:{opacity:"1"}}));const s=`${n}-${e}`,c=`${o}-${e}`,d=`${o}-id-${e}`,u=`${o}-order-${e}`,p=`${o}-${e}--deleted`,f=`${c}--panel`,h=`${c}--heading-index`,m=Ct("div",{"data-sequence-block-field":!0,id:c+"--block","data-index":String(t),"data-sortable-target":"item","data-replace":`#${u};#${h}+;[data-index]`,class:"sequence-block-field"},Ct("input",{type:"hidden",id:d,name:d,value:i.id}),Ct("input",{type:"hidden",id:u,name:u,value:String(i.order)}),Ct("input",{type:"hidden",id:p,name:p,value:""}),Ot({panelId:f,heading:Ct("div",{class:"sequence-block-field-heading"},this.block.meta.label?Ct("label",{for:d,class:"sequence-block-field-heading-label"},this.block.meta.label,":"):null,Ct("span",{id:h,class:"sequence-block-field-heading-index"},String(i.order+1))),children:Ct("div",{"data-sequence-block-field-content":!0,class:"sequence-block-field-content"},Ct("div",{"data-sequence-block-field-controls":!0,class:"sequence-block-field-controls"},Ct("button",{type:"button",class:"sequence-block-field-move-up-button","aria-label":window.i18n.gettext("Move %s up",this.block.childBlock.meta.label||window.i18n.gettext("item")),onClick:this.move.bind(this,c,"up")},St("icon-arrow-up",{title:window.i18n.gettext("Move %s up",this.block.childBlock.meta.label||window.i18n.gettext("item"))})),Ct("button",{type:"button",class:"sequence-block-field-move-down-button","aria-label":window.i18n.gettext("Move %s down",this.block.childBlock.meta.label||window.i18n.gettext("item")),onClick:this.move.bind(this,c,"down")},St("icon-arrow-down",{title:window.i18n.gettext("Move %s down",this.block.childBlock.meta.label||window.i18n.gettext("item"))})),Ct("button",{type:"button",class:"sequence-block-field-drag-handle","aria-label":window.i18n.gettext("Drag %s to reorder",this.block.childBlock.meta.label||window.i18n.gettext("item"))},St("icon-grip-horizontal",{title:window.i18n.gettext("Drag %s to reorder",this.block.childBlock.meta.label||window.i18n.gettext("item"))}))),Ct("div",{"data-sequence-block-field-placeholder":!0}),Ct("div",{"data-sequence-block-field-actions":!0,class:"sequence-block-field-actions"},Ct("div",{"data-sequence-block-field-actions-group":!0,class:"sequence-block-field-actions-group"},Ct("div",{"data-sequence-block-field-delete":!0,class:"sequence-block-field-delete"},Ct("button",{type:"button","data-action":"delete",class:"sequence-block-field-delete-button sequence-block-field-actions-text",onClick:this._onDeleteClick.bind(this,c)},St("icon-trash"))),Ct("div",{"data-sequence-block-field-add":!0,class:"sequence-block-field-add"},Ct("button",{type:"button","data-action":"add",class:"sequence-block-field-add-button sequence-block-field-actions-text",onClick:this._onAddClick.bind(this,c)},St("icon-plus"))))))}));return a&&l.addElement(m),0===t?this.itemWrapper.prepend(m):t>=this.items.length?this.itemWrapper.appendChild(m):this.itemWrapper.insertBefore(m,this.itemWrapper.children[t]),this.items.push(this.block.childBlock.render(m.querySelector("[data-sequence-block-field-placeholder]"),s,c,i.data,r)),a&&l.start(),m}_onDeleteClick(e,t){t.preventDefault();const n=`#${e}--block`,o=this.itemWrapper.querySelector(n);if(!o)return void console.warn("Couldn't find item to delete",n);if(this.activeItems<=1&&this.block.meta.required||this.block.meta.minNum&&this.activeItems<=this.block.meta.minNum)return console.warn("Can't delete item, minimum reached"),void _t(o);const i=o.querySelector(`#${e}--deleted`);if(!i)return void console.warn("Couldn't find deleted input",`#${e}--deleted`);o.style.display="none",i.value="1",this.activeItems-=1,_t(this.itemWrapper,{color:"orange",duration:300,iters:1,delay:20});const r=window.Stimulus.getControllerForElementAndIdentifier(this.element,"sortable");r?r.reOrderItems():console.warn("Couldn't find sortable controller for list block",this.element)}_onAddClick(e,t){if(t.preventDefault(),this.block.meta.maxNum&&this.activeItems>=this.block.meta.maxNum)return console.warn("Can't add item, maximum reached"),void _t(this.itemWrapper);let n=0;if(e){e=`#${e}--block`;const t=this.itemWrapper.querySelector(e);if(!t)return void console.warn("Couldn't find item to add",e);n=parseInt(t.dataset.index||"0",10)+1}_t(this._createChild(this.items.length,n,this.id,this.name,{id:"",order:n,data:null},null),{color:"green",duration:300,iters:1,delay:100}),this.totalInput.value=String(this.items.length),this.activeItems+=1}}class Lt extends kt{constructor(e,t,n){super(),this.name=e,this.childBlock=t,this.meta=n}render(e,t,n,o,i){return new Nt(this,e,n,t,o,i)}}class qt extends xt{constructor(e,t,n,o,i,r,a={}){var l;const s=Ct("ul",{class:"field-errors"}),c=Ct("div",{class:"field-label"},Ct("label",{for:o},e.meta.label)),d=Ct("div",{class:"field-widget"}),u=Ot({panelId:`${n}--panel`,class:"field-block",allowPanelLink:!!e.meta.label,heading:c,helpText:e.meta.helpText?Ct("div",{class:"field-help"},e.meta.helpText):null,errors:s,children:d});Mt(t,u.hasAttribute.bind(u),u.body.setAttribute.bind(u.body)),t.replaceWith(u),super(e,n,u),this.errorList=s,this.labelWrapper=c,this.attrs=a;const p={attributes:this.getAttributes()};i=null!==(l=null!=i?i:e.meta.default)&&void 0!==l?l:null,this.widget=e.widget.render(d,n,o,i,p),r&&this.setError(r)}getAttributes(){const e=this.attrs||{};return this.block.meta.required&&(e.required="required"),e}getLabel(){return this.widget.getTextLabel()}getState(){return this.widget.getState()}setState(e){this.widget.setState(e)}getValue(){return this.widget.getValue()}setValue(e){this.widget.setValue(e)}setError(e){if(e&&0!==(null==e?void 0:e.length))if(Array.isArray(e)){if(!e.length)return void(this.errorList.innerHTML="");this.errorList.innerHTML="",e.forEach(e=>{const t=Ct("li",null,e);this.errorList.appendChild(t)})}else if("object"==typeof e){var t=Object.keys(e);if(this.errorList.innerHTML="",!t.length)return;t.forEach(t=>{e[t].forEach(e=>{const t=Ct("li",null,e);this.errorList.appendChild(t)})})}else this.errorList.innerHTML="",this.errorList.appendChild(Ct("li",null,e))}}class Bt extends kt{constructor(e,t,n){super(),this.name=e,this.widget=t,this.meta=n}render(e,t,n,o,i,r={}){return new qt(this,e,n,t,o,i,r)}}class jt extends xt{constructor(e,t,n,o,i,r){var a,l,s;i=i||{},r=r||{};let c=null;e.meta.label&&(c=Ct("div",{class:"field-label"},Ct("label",null,e.meta.label)));let d=null;r&&(null==r?void 0:r.nonBlockErrors)&&(d=Ct("ul",{class:"field-errors"},null===(a=null==r?void 0:r.nonBlockErrors)||void 0===a?void 0:a.map(e=>Ct("li",{class:"field-error"},e))));const u=Ct("div",{"data-struct-block-children":!0}),p=Ot({panelId:`${n}--panel`,class:"field-block",allowPanelLink:!!e.meta.label,heading:c,helpText:e.meta.helpText?Ct("div",{class:"field-help"},e.meta.helpText):null,errors:d,children:u});Mt(t,p.hasAttribute.bind(p),p.body.setAttribute.bind(p.body)),t.replaceWith(p),super(e,n,p),this.element.dataset.structBlock="true",this.childBlocks={};var f=Object.keys(e.children);for(let t=0;t<f.length;t++){const n=f[t],a=e.children[n],c=this.name+"-"+n,d=o+"-"+n,p=Ct("div",{"data-struct-field":!0,"data-contentpath":c},Ct("div",{"data-struct-field-content":!0},Ct("div",{"data-struct-field-content-placeholder":!0})));u.appendChild(p),this.childBlocks[c]=a.render(p.firstElementChild.firstElementChild,d,c,i[n],null===(s=null===(l=null==r?void 0:r.errors)||void 0===l?void 0:l[n])||void 0===s?void 0:s[0])}}getLabel(){for(let e=0;e<this.block.config.childBlocks.length;e++){let t=this.block.config.childBlocks[e].getLabel();if(t)return t}return""}getState(){const e={};for(const t in this.childBlocks)e[t]=this.childBlocks[t].getState();return e}setState(e){for(const t in this.childBlocks)this.childBlocks[t].setState(e[t])}setError(e){if(e){if(e.blockErrors)for(const t in e.blockErrors)this.childBlocks[t].setError(e.blockErrors[t]);(null==e?void 0:e.nonBlockErrors)&&(this.element.style.backgroundColor="red")}}}class Pt extends kt{constructor(e,t,n){super(),this.name=e,this.meta=n,this.children={};for(let e=0;e<t.length;e++)this.children[t[e].name]=t[e].block}render(e,t,n,o,i){return new jt(this,e,n,t,o,i)}}class Wt extends Error{constructor(e){super(`No input found with name "${e}"`),this.name="InputNotFoundError"}}class $t{constructor(e,t){this.idForLabel=null;const n=`:is(input,select,textarea,button)[name="${t}"]`;if(this.input=((e,t)=>{const n=e.forEach?e:[e];for(let e=0;e<n.length;e+=1){const o=n[e];if(o.nodeType===Node.ELEMENT_NODE){if(o.matches(t))return o;const e=o.querySelector(t);if(e)return e}}return null})(e,n),!this.input)throw new Wt(t);this.idForLabel=this.input.id}getState(){return this.input.value}getValue(){return this.input.value}setState(e){this.input.value=e}setValue(e){this.input.value=e}focus(){this.input.focus()}getValueForLabel(){return this.getValue()}getTextLabel(e){const t=this.getValueForLabel();if(!["string","number","boolean"].includes(typeof t))return null;const n=String(t).trim(),o=e&&e.maxLength;return o&&n.length>o?n.substring(0,o-1)+"…":n}}class Rt{constructor(e){this.boundWidgetClass=$t,this.html=e}render(e,t,n,o,i={}){const r=this.html.replace(/__NAME__/g,t).replace(/__ID__/g,n),a=document.createElement("div");a.innerHTML=r;const l=Array.from(a.childNodes);e.replaceWith(...l);const s=l.filter(e=>e.nodeType===Node.ELEMENT_NODE);if("object"==typeof(null==i?void 0:i.attributes))for(const[e,t]of Object.entries(i.attributes))s[0].setAttribute(e,t);const c=new this.boundWidgetClass(1===s.length?s[0]:l,t);return c.setState(o),c}}class Vt extends $t{getState(){return this.input.checked}getValue(){return this.input.checked}setState(e){this.input.checked=Boolean(e)}setValue(e){this.input.checked=Boolean(e)}getValueForLabel(){return this.getValue()?window.i18n.gettext("Yes"):window.i18n.gettext("No")}}class Ft extends Rt{constructor(){super(...arguments),this.boundWidgetClass=Vt}}class Ht{constructor(e,t){this.element=e,this.name=t,this.idForLabel="",this.isMultiple=!!this.element.querySelector(`input[name="${t}"][type="checkbox"]`),this.selector=`input[name="${t}"]:checked`}getValueForLabel(){const e=e=>Array.from((null==e?void 0:e.labels)||[]).map(e=>e.textContent.trim()).filter(Boolean).join(", ");return this.isMultiple?Array.from(this.element.querySelectorAll(this.selector)).map(e).join(", "):e(this.element.querySelector(this.selector))}getTextLabel(){return this.getValueForLabel()}getValue(){var e;return this.isMultiple?Array.from(this.element.querySelectorAll(this.selector)).map(e=>e.value):null===(e=this.element.querySelector(this.selector))||void 0===e?void 0:e.value}getState(){return Array.from(this.element.querySelectorAll(this.selector)).map(e=>e.value)}setState(e){const t=this.element.querySelectorAll(`input[name="${this.name}"]`);for(let n=0;n<t.length;n+=1)t[n].checked=e.includes(t[n].value)}setInvalid(e){this.element.querySelectorAll(`input[name="${this.name}"]`).forEach(t=>{e?t.setAttribute("aria-invalid","true"):t.removeAttribute("aria-invalid")})}focus(){var e;null===(e=this.element.querySelector(`input[name="${this.name}"]`))||void 0===e||e.focus()}}class Yt extends Rt{constructor(){super(...arguments),this.boundWidgetClass=Ht}}class Xt extends $t{getValueForLabel(){return Array.from(this.input.selectedOptions).map(e=>e.text).join(", ")}getValue(){return this.input.multiple?Array.from(this.input.selectedOptions).map(e=>e.value):this.input.value}getState(){return Array.from(this.input.selectedOptions).map(e=>e.value)}setState(e){const t=this.input.options;for(let n=0;n<t.length;n+=1)t[n].selected=e.includes(t[n].value)}}class zt extends Rt{constructor(){super(...arguments),this.boundWidgetClass=Xt}}function Ut(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Kt(e){return e instanceof Ut(e).Element||e instanceof Element}function Gt(e){return e instanceof Ut(e).HTMLElement||e instanceof HTMLElement}function Jt(e){return"undefined"!=typeof ShadowRoot&&(e instanceof Ut(e).ShadowRoot||e instanceof ShadowRoot)}!function(e){e.Widget=Rt,e.BoundWidget=$t,e.InputNotFoundError=Wt,e.CheckboxInput=Ft,e.RadioSelect=Yt,e.Select=zt,e.BoundCheckboxInput=Vt,e.BoundRadioSelect=Ht,e.BoundSelect=Xt}(window);var Zt=Math.max,Qt=Math.min,en=Math.round;function tn(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function nn(){return!/^((?!chrome|android).)*safari/i.test(tn())}function on(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var o=e.getBoundingClientRect(),i=1,r=1;t&&Gt(e)&&(i=e.offsetWidth>0&&en(o.width)/e.offsetWidth||1,r=e.offsetHeight>0&&en(o.height)/e.offsetHeight||1);var a=(Kt(e)?Ut(e):window).visualViewport,l=!nn()&&n,s=(o.left+(l&&a?a.offsetLeft:0))/i,c=(o.top+(l&&a?a.offsetTop:0))/r,d=o.width/i,u=o.height/r;return{width:d,height:u,top:c,right:s+d,bottom:c+u,left:s,x:s,y:c}}function rn(e){var t=Ut(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function an(e){return e?(e.nodeName||"").toLowerCase():null}function ln(e){return((Kt(e)?e.ownerDocument:e.document)||window.document).documentElement}function sn(e){return on(ln(e)).left+rn(e).scrollLeft}function cn(e){return Ut(e).getComputedStyle(e)}function dn(e){var t=cn(e),n=t.overflow,o=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+o)}function un(e,t,n){void 0===n&&(n=!1);var o,i,r=Gt(t),a=Gt(t)&&function(e){var t=e.getBoundingClientRect(),n=en(t.width)/e.offsetWidth||1,o=en(t.height)/e.offsetHeight||1;return 1!==n||1!==o}(t),l=ln(t),s=on(e,a,n),c={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(r||!r&&!n)&&(("body"!==an(t)||dn(l))&&(c=(o=t)!==Ut(o)&&Gt(o)?{scrollLeft:(i=o).scrollLeft,scrollTop:i.scrollTop}:rn(o)),Gt(t)?((d=on(t,!0)).x+=t.clientLeft,d.y+=t.clientTop):l&&(d.x=sn(l))),{x:s.left+c.scrollLeft-d.x,y:s.top+c.scrollTop-d.y,width:s.width,height:s.height}}function pn(e){var t=on(e),n=e.offsetWidth,o=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-o)<=1&&(o=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:o}}function fn(e){return"html"===an(e)?e:e.assignedSlot||e.parentNode||(Jt(e)?e.host:null)||ln(e)}function hn(e){return["html","body","#document"].indexOf(an(e))>=0?e.ownerDocument.body:Gt(e)&&dn(e)?e:hn(fn(e))}function mn(e,t){var n;void 0===t&&(t=[]);var o=hn(e),i=o===(null==(n=e.ownerDocument)?void 0:n.body),r=Ut(o),a=i?[r].concat(r.visualViewport||[],dn(o)?o:[]):o,l=t.concat(a);return i?l:l.concat(mn(fn(a)))}function gn(e){return["table","td","th"].indexOf(an(e))>=0}function vn(e){return Gt(e)&&"fixed"!==cn(e).position?e.offsetParent:null}function bn(e){for(var t=Ut(e),n=vn(e);n&&gn(n)&&"static"===cn(n).position;)n=vn(n);return n&&("html"===an(n)||"body"===an(n)&&"static"===cn(n).position)?t:n||function(e){var t=/firefox/i.test(tn());if(/Trident/i.test(tn())&&Gt(e)&&"fixed"===cn(e).position)return null;var n=fn(e);for(Jt(n)&&(n=n.host);Gt(n)&&["html","body"].indexOf(an(n))<0;){var o=cn(n);if("none"!==o.transform||"none"!==o.perspective||"paint"===o.contain||-1!==["transform","perspective"].indexOf(o.willChange)||t&&"filter"===o.willChange||t&&o.filter&&"none"!==o.filter)return n;n=n.parentNode}return null}(e)||t}var yn="top",wn="bottom",xn="right",kn="left",En="auto",Cn=[yn,wn,xn,kn],Sn="start",Dn="end",An="viewport",On="popper",Tn=Cn.reduce(function(e,t){return e.concat([t+"-"+Sn,t+"-"+Dn])},[]),_n=[].concat(Cn,[En]).reduce(function(e,t){return e.concat([t,t+"-"+Sn,t+"-"+Dn])},[]),In=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Mn(e){var t=new Map,n=new Set,o=[];function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach(function(e){if(!n.has(e)){var o=t.get(e);o&&i(o)}}),o.push(e)}return e.forEach(function(e){t.set(e.name,e)}),e.forEach(function(e){n.has(e.name)||i(e)}),o}var Nn={placement:"bottom",modifiers:[],strategy:"absolute"};function Ln(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(e){return!(e&&"function"==typeof e.getBoundingClientRect)})}function qn(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,o=void 0===n?[]:n,i=t.defaultOptions,r=void 0===i?Nn:i;return function(e,t,n){void 0===n&&(n=r);var i,a,l={placement:"bottom",orderedModifiers:[],options:Object.assign({},Nn,r),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},s=[],c=!1,d={state:l,setOptions:function(n){var i="function"==typeof n?n(l.options):n;u(),l.options=Object.assign({},r,l.options,i),l.scrollParents={reference:Kt(e)?mn(e):e.contextElement?mn(e.contextElement):[],popper:mn(t)};var a,c,p=function(e){var t=Mn(e);return In.reduce(function(e,n){return e.concat(t.filter(function(e){return e.phase===n}))},[])}((a=[].concat(o,l.options.modifiers),c=a.reduce(function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e},{}),Object.keys(c).map(function(e){return c[e]})));return l.orderedModifiers=p.filter(function(e){return e.enabled}),l.orderedModifiers.forEach(function(e){var t=e.name,n=e.options,o=void 0===n?{}:n,i=e.effect;if("function"==typeof i){var r=i({state:l,name:t,instance:d,options:o});s.push(r||function(){})}}),d.update()},forceUpdate:function(){if(!c){var e=l.elements,t=e.reference,n=e.popper;if(Ln(t,n)){l.rects={reference:un(t,bn(n),"fixed"===l.options.strategy),popper:pn(n)},l.reset=!1,l.placement=l.options.placement,l.orderedModifiers.forEach(function(e){return l.modifiersData[e.name]=Object.assign({},e.data)});for(var o=0;o<l.orderedModifiers.length;o++)if(!0!==l.reset){var i=l.orderedModifiers[o],r=i.fn,a=i.options,s=void 0===a?{}:a,u=i.name;"function"==typeof r&&(l=r({state:l,options:s,name:u,instance:d})||l)}else l.reset=!1,o=-1}}},update:(i=function(){return new Promise(function(e){d.forceUpdate(),e(l)})},function(){return a||(a=new Promise(function(e){Promise.resolve().then(function(){a=void 0,e(i())})})),a}),destroy:function(){u(),c=!0}};if(!Ln(e,t))return d;function u(){s.forEach(function(e){return e()}),s=[]}return d.setOptions(n).then(function(e){!c&&n.onFirstUpdate&&n.onFirstUpdate(e)}),d}}var Bn={passive:!0};function jn(e){return e.split("-")[0]}function Pn(e){return e.split("-")[1]}function Wn(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function $n(e){var t,n=e.reference,o=e.element,i=e.placement,r=i?jn(i):null,a=i?Pn(i):null,l=n.x+n.width/2-o.width/2,s=n.y+n.height/2-o.height/2;switch(r){case yn:t={x:l,y:n.y-o.height};break;case wn:t={x:l,y:n.y+n.height};break;case xn:t={x:n.x+n.width,y:s};break;case kn:t={x:n.x-o.width,y:s};break;default:t={x:n.x,y:n.y}}var c=r?Wn(r):null;if(null!=c){var d="y"===c?"height":"width";switch(a){case Sn:t[c]=t[c]-(n[d]/2-o[d]/2);break;case Dn:t[c]=t[c]+(n[d]/2-o[d]/2)}}return t}var Rn={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Vn(e){var t,n=e.popper,o=e.popperRect,i=e.placement,r=e.variation,a=e.offsets,l=e.position,s=e.gpuAcceleration,c=e.adaptive,d=e.roundOffsets,u=e.isFixed,p=a.x,f=void 0===p?0:p,h=a.y,m=void 0===h?0:h,g="function"==typeof d?d({x:f,y:m}):{x:f,y:m};f=g.x,m=g.y;var v=a.hasOwnProperty("x"),b=a.hasOwnProperty("y"),y=kn,w=yn,x=window;if(c){var k=bn(n),E="clientHeight",C="clientWidth";k===Ut(n)&&"static"!==cn(k=ln(n)).position&&"absolute"===l&&(E="scrollHeight",C="scrollWidth"),(i===yn||(i===kn||i===xn)&&r===Dn)&&(w=wn,m-=(u&&k===x&&x.visualViewport?x.visualViewport.height:k[E])-o.height,m*=s?1:-1),i!==kn&&(i!==yn&&i!==wn||r!==Dn)||(y=xn,f-=(u&&k===x&&x.visualViewport?x.visualViewport.width:k[C])-o.width,f*=s?1:-1)}var S,D=Object.assign({position:l},c&&Rn),A=!0===d?function(e,t){var n=e.x,o=e.y,i=t.devicePixelRatio||1;return{x:en(n*i)/i||0,y:en(o*i)/i||0}}({x:f,y:m},Ut(n)):{x:f,y:m};return f=A.x,m=A.y,s?Object.assign({},D,((S={})[w]=b?"0":"",S[y]=v?"0":"",S.transform=(x.devicePixelRatio||1)<=1?"translate("+f+"px, "+m+"px)":"translate3d("+f+"px, "+m+"px, 0)",S)):Object.assign({},D,((t={})[w]=b?m+"px":"",t[y]=v?f+"px":"",t.transform="",t))}const Fn={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach(function(e){var n=t.styles[e]||{},o=t.attributes[e]||{},i=t.elements[e];Gt(i)&&an(i)&&(Object.assign(i.style,n),Object.keys(o).forEach(function(e){var t=o[e];!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)}))})},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(e){var o=t.elements[e],i=t.attributes[e]||{},r=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce(function(e,t){return e[t]="",e},{});Gt(o)&&an(o)&&(Object.assign(o.style,r),Object.keys(i).forEach(function(e){o.removeAttribute(e)}))})}},requires:["computeStyles"]};var Hn={left:"right",right:"left",bottom:"top",top:"bottom"};function Yn(e){return e.replace(/left|right|bottom|top/g,function(e){return Hn[e]})}var Xn={start:"end",end:"start"};function zn(e){return e.replace(/start|end/g,function(e){return Xn[e]})}function Un(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&Jt(n)){var o=t;do{if(o&&e.isSameNode(o))return!0;o=o.parentNode||o.host}while(o)}return!1}function Kn(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Gn(e,t,n){return t===An?Kn(function(e,t){var n=Ut(e),o=ln(e),i=n.visualViewport,r=o.clientWidth,a=o.clientHeight,l=0,s=0;if(i){r=i.width,a=i.height;var c=nn();(c||!c&&"fixed"===t)&&(l=i.offsetLeft,s=i.offsetTop)}return{width:r,height:a,x:l+sn(e),y:s}}(e,n)):Kt(t)?function(e,t){var n=on(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):Kn(function(e){var t,n=ln(e),o=rn(e),i=null==(t=e.ownerDocument)?void 0:t.body,r=Zt(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=Zt(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),l=-o.scrollLeft+sn(e),s=-o.scrollTop;return"rtl"===cn(i||n).direction&&(l+=Zt(n.clientWidth,i?i.clientWidth:0)-r),{width:r,height:a,x:l,y:s}}(ln(e)))}function Jn(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function Zn(e,t){return t.reduce(function(t,n){return t[n]=e,t},{})}function Qn(e,t){void 0===t&&(t={});var n=t,o=n.placement,i=void 0===o?e.placement:o,r=n.strategy,a=void 0===r?e.strategy:r,l=n.boundary,s=void 0===l?"clippingParents":l,c=n.rootBoundary,d=void 0===c?An:c,u=n.elementContext,p=void 0===u?On:u,f=n.altBoundary,h=void 0!==f&&f,m=n.padding,g=void 0===m?0:m,v=Jn("number"!=typeof g?g:Zn(g,Cn)),b=p===On?"reference":On,y=e.rects.popper,w=e.elements[h?b:p],x=function(e,t,n,o){var i="clippingParents"===t?function(e){var t=mn(fn(e)),n=["absolute","fixed"].indexOf(cn(e).position)>=0&&Gt(e)?bn(e):e;return Kt(n)?t.filter(function(e){return Kt(e)&&Un(e,n)&&"body"!==an(e)}):[]}(e):[].concat(t),r=[].concat(i,[n]),a=r[0],l=r.reduce(function(t,n){var i=Gn(e,n,o);return t.top=Zt(i.top,t.top),t.right=Qt(i.right,t.right),t.bottom=Qt(i.bottom,t.bottom),t.left=Zt(i.left,t.left),t},Gn(e,a,o));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}(Kt(w)?w:w.contextElement||ln(e.elements.popper),s,d,a),k=on(e.elements.reference),E=$n({reference:k,element:y,strategy:"absolute",placement:i}),C=Kn(Object.assign({},y,E)),S=p===On?C:k,D={top:x.top-S.top+v.top,bottom:S.bottom-x.bottom+v.bottom,left:x.left-S.left+v.left,right:S.right-x.right+v.right},A=e.modifiersData.offset;if(p===On&&A){var O=A[i];Object.keys(D).forEach(function(e){var t=[xn,wn].indexOf(e)>=0?1:-1,n=[yn,wn].indexOf(e)>=0?"y":"x";D[e]+=O[n]*t})}return D}function eo(e,t,n){return Zt(e,Qt(t,n))}function to(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function no(e){return[yn,xn,wn,kn].some(function(t){return e[t]>=0})}var oo=qn({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,o=e.options,i=o.scroll,r=void 0===i||i,a=o.resize,l=void 0===a||a,s=Ut(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return r&&c.forEach(function(e){e.addEventListener("scroll",n.update,Bn)}),l&&s.addEventListener("resize",n.update,Bn),function(){r&&c.forEach(function(e){e.removeEventListener("scroll",n.update,Bn)}),l&&s.removeEventListener("resize",n.update,Bn)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=$n({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,o=n.gpuAcceleration,i=void 0===o||o,r=n.adaptive,a=void 0===r||r,l=n.roundOffsets,s=void 0===l||l,c={placement:jn(t.placement),variation:Pn(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,Vn(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:s})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,Vn(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:s})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},Fn,{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,o=e.name,i=n.offset,r=void 0===i?[0,0]:i,a=_n.reduce(function(e,n){return e[n]=function(e,t,n){var o=jn(e),i=[kn,yn].indexOf(o)>=0?-1:1,r="function"==typeof n?n(Object.assign({},t,{placement:e})):n,a=r[0],l=r[1];return a=a||0,l=(l||0)*i,[kn,xn].indexOf(o)>=0?{x:l,y:a}:{x:a,y:l}}(n,t.rects,r),e},{}),l=a[t.placement],s=l.x,c=l.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=s,t.modifiersData.popperOffsets.y+=c),t.modifiersData[o]=a}},{name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,o=e.name;if(!t.modifiersData[o]._skip){for(var i=n.mainAxis,r=void 0===i||i,a=n.altAxis,l=void 0===a||a,s=n.fallbackPlacements,c=n.padding,d=n.boundary,u=n.rootBoundary,p=n.altBoundary,f=n.flipVariations,h=void 0===f||f,m=n.allowedAutoPlacements,g=t.options.placement,v=jn(g),b=s||(v!==g&&h?function(e){if(jn(e)===En)return[];var t=Yn(e);return[zn(e),t,zn(t)]}(g):[Yn(g)]),y=[g].concat(b).reduce(function(e,n){return e.concat(jn(n)===En?function(e,t){void 0===t&&(t={});var n=t,o=n.placement,i=n.boundary,r=n.rootBoundary,a=n.padding,l=n.flipVariations,s=n.allowedAutoPlacements,c=void 0===s?_n:s,d=Pn(o),u=d?l?Tn:Tn.filter(function(e){return Pn(e)===d}):Cn,p=u.filter(function(e){return c.indexOf(e)>=0});0===p.length&&(p=u);var f=p.reduce(function(t,n){return t[n]=Qn(e,{placement:n,boundary:i,rootBoundary:r,padding:a})[jn(n)],t},{});return Object.keys(f).sort(function(e,t){return f[e]-f[t]})}(t,{placement:n,boundary:d,rootBoundary:u,padding:c,flipVariations:h,allowedAutoPlacements:m}):n)},[]),w=t.rects.reference,x=t.rects.popper,k=new Map,E=!0,C=y[0],S=0;S<y.length;S++){var D=y[S],A=jn(D),O=Pn(D)===Sn,T=[yn,wn].indexOf(A)>=0,_=T?"width":"height",I=Qn(t,{placement:D,boundary:d,rootBoundary:u,altBoundary:p,padding:c}),M=T?O?xn:kn:O?wn:yn;w[_]>x[_]&&(M=Yn(M));var N=Yn(M),L=[];if(r&&L.push(I[A]<=0),l&&L.push(I[M]<=0,I[N]<=0),L.every(function(e){return e})){C=D,E=!1;break}k.set(D,L)}if(E)for(var q=function(e){var t=y.find(function(t){var n=k.get(t);if(n)return n.slice(0,e).every(function(e){return e})});if(t)return C=t,"break"},B=h?3:1;B>0&&"break"!==q(B);B--);t.placement!==C&&(t.modifiersData[o]._skip=!0,t.placement=C,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,o=e.name,i=n.mainAxis,r=void 0===i||i,a=n.altAxis,l=void 0!==a&&a,s=n.boundary,c=n.rootBoundary,d=n.altBoundary,u=n.padding,p=n.tether,f=void 0===p||p,h=n.tetherOffset,m=void 0===h?0:h,g=Qn(t,{boundary:s,rootBoundary:c,padding:u,altBoundary:d}),v=jn(t.placement),b=Pn(t.placement),y=!b,w=Wn(v),x="x"===w?"y":"x",k=t.modifiersData.popperOffsets,E=t.rects.reference,C=t.rects.popper,S="function"==typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,D="number"==typeof S?{mainAxis:S,altAxis:S}:Object.assign({mainAxis:0,altAxis:0},S),A=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,O={x:0,y:0};if(k){if(r){var T,_="y"===w?yn:kn,I="y"===w?wn:xn,M="y"===w?"height":"width",N=k[w],L=N+g[_],q=N-g[I],B=f?-C[M]/2:0,j=b===Sn?E[M]:C[M],P=b===Sn?-C[M]:-E[M],W=t.elements.arrow,$=f&&W?pn(W):{width:0,height:0},R=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},V=R[_],F=R[I],H=eo(0,E[M],$[M]),Y=y?E[M]/2-B-H-V-D.mainAxis:j-H-V-D.mainAxis,X=y?-E[M]/2+B+H+F+D.mainAxis:P+H+F+D.mainAxis,z=t.elements.arrow&&bn(t.elements.arrow),U=z?"y"===w?z.clientTop||0:z.clientLeft||0:0,K=null!=(T=null==A?void 0:A[w])?T:0,G=N+X-K,J=eo(f?Qt(L,N+Y-K-U):L,N,f?Zt(q,G):q);k[w]=J,O[w]=J-N}if(l){var Z,Q="x"===w?yn:kn,ee="x"===w?wn:xn,te=k[x],ne="y"===x?"height":"width",oe=te+g[Q],ie=te-g[ee],re=-1!==[yn,kn].indexOf(v),ae=null!=(Z=null==A?void 0:A[x])?Z:0,le=re?oe:te-E[ne]-C[ne]-ae+D.altAxis,se=re?te+E[ne]+C[ne]-ae-D.altAxis:ie,ce=f&&re?function(e,t,n){var o=eo(e,t,n);return o>n?n:o}(le,te,se):eo(f?le:oe,te,f?se:ie);k[x]=ce,O[x]=ce-te}t.modifiersData[o]=O}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,o=e.name,i=e.options,r=n.elements.arrow,a=n.modifiersData.popperOffsets,l=jn(n.placement),s=Wn(l),c=[kn,xn].indexOf(l)>=0?"height":"width";if(r&&a){var d=function(e,t){return Jn("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:Zn(e,Cn))}(i.padding,n),u=pn(r),p="y"===s?yn:kn,f="y"===s?wn:xn,h=n.rects.reference[c]+n.rects.reference[s]-a[s]-n.rects.popper[c],m=a[s]-n.rects.reference[s],g=bn(r),v=g?"y"===s?g.clientHeight||0:g.clientWidth||0:0,b=h/2-m/2,y=d[p],w=v-u[c]-d[f],x=v/2-u[c]/2+b,k=eo(y,x,w),E=s;n.modifiersData[o]=((t={})[E]=k,t.centerOffset=k-x,t)}},effect:function(e){var t=e.state,n=e.options.element,o=void 0===n?"[data-popper-arrow]":n;null!=o&&("string"!=typeof o||(o=t.elements.popper.querySelector(o)))&&Un(t.elements.popper,o)&&(t.elements.arrow=o)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,o=t.rects.reference,i=t.rects.popper,r=t.modifiersData.preventOverflow,a=Qn(t,{elementContext:"reference"}),l=Qn(t,{altBoundary:!0}),s=to(a,o),c=to(l,i,r),d=no(s),u=no(c);t.modifiersData[n]={referenceClippingOffsets:s,popperEscapeOffsets:c,isReferenceHidden:d,hasPopperEscaped:u},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":u})}}]}),io="tippy-content",ro="tippy-arrow",ao="tippy-svg-arrow",lo={passive:!0,capture:!0},so=function(){return document.body};function co(e,t,n){if(Array.isArray(e)){var o=e[t];return null==o?Array.isArray(n)?n[t]:n:o}return e}function uo(e,t){var n={}.toString.call(e);return 0===n.indexOf("[object")&&n.indexOf(t+"]")>-1}function po(e,t){return"function"==typeof e?e.apply(void 0,t):e}function fo(e,t){return 0===t?e:function(o){clearTimeout(n),n=setTimeout(function(){e(o)},t)};var n}function ho(e){return[].concat(e)}function mo(e,t){-1===e.indexOf(t)&&e.push(t)}function go(e){return[].slice.call(e)}function vo(e){return Object.keys(e).reduce(function(t,n){return void 0!==e[n]&&(t[n]=e[n]),t},{})}function bo(){return document.createElement("div")}function yo(e){return["Element","Fragment"].some(function(t){return uo(e,t)})}function wo(e,t){e.forEach(function(e){e&&(e.style.transitionDuration=t+"ms")})}function xo(e,t){e.forEach(function(e){e&&e.setAttribute("data-state",t)})}function ko(e,t,n){var o=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(t){e[o](t,n)})}function Eo(e,t){for(var n=t;n;){var o;if(e.contains(n))return!0;n=null==n.getRootNode||null==(o=n.getRootNode())?void 0:o.host}return!1}var Co={isTouch:!1},So=0;function Do(){Co.isTouch||(Co.isTouch=!0,window.performance&&document.addEventListener("mousemove",Ao))}function Ao(){var e=performance.now();e-So<20&&(Co.isTouch=!1,document.removeEventListener("mousemove",Ao)),So=e}function Oo(){var e,t=document.activeElement;if((e=t)&&e._tippy&&e._tippy.reference===e){var n=t._tippy;t.blur&&!n.state.isVisible&&t.blur()}}var To=!("undefined"==typeof window||"undefined"==typeof document||!window.msCrypto),_o=Object.assign({appendTo:so,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},{animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},{allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999}),Io=Object.keys(_o);function Mo(e){var t=(e.plugins||[]).reduce(function(t,n){var o,i=n.name,r=n.defaultValue;return i&&(t[i]=void 0!==e[i]?e[i]:null!=(o=_o[i])?o:r),t},{});return Object.assign({},e,t)}function No(e,t){var n=Object.assign({},t,{content:po(t.content,[e])},t.ignoreAttributes?{}:function(e,t){return(t?Object.keys(Mo(Object.assign({},_o,{plugins:t}))):Io).reduce(function(t,n){var o=(e.getAttribute("data-tippy-"+n)||"").trim();if(!o)return t;if("content"===n)t[n]=o;else try{t[n]=JSON.parse(o)}catch(e){t[n]=o}return t},{})}(e,t.plugins));return n.aria=Object.assign({},_o.aria,n.aria),n.aria={expanded:"auto"===n.aria.expanded?t.interactive:n.aria.expanded,content:"auto"===n.aria.content?t.interactive?null:"describedby":n.aria.content},n}function Lo(e,t){e.innerHTML=t}function qo(e){var t=bo();return!0===e?t.className=ro:(t.className=ao,yo(e)?t.appendChild(e):Lo(t,e)),t}function Bo(e,t){yo(t.content)?(Lo(e,""),e.appendChild(t.content)):"function"!=typeof t.content&&(t.allowHTML?Lo(e,t.content):e.textContent=t.content)}function jo(e){var t=e.firstElementChild,n=go(t.children);return{box:t,content:n.find(function(e){return e.classList.contains(io)}),arrow:n.find(function(e){return e.classList.contains(ro)||e.classList.contains(ao)}),backdrop:n.find(function(e){return e.classList.contains("tippy-backdrop")})}}function Po(e){var t=bo(),n=bo();n.className="tippy-box",n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var o=bo();function i(n,o){var i=jo(t),r=i.box,a=i.content,l=i.arrow;o.theme?r.setAttribute("data-theme",o.theme):r.removeAttribute("data-theme"),"string"==typeof o.animation?r.setAttribute("data-animation",o.animation):r.removeAttribute("data-animation"),o.inertia?r.setAttribute("data-inertia",""):r.removeAttribute("data-inertia"),r.style.maxWidth="number"==typeof o.maxWidth?o.maxWidth+"px":o.maxWidth,o.role?r.setAttribute("role",o.role):r.removeAttribute("role"),n.content===o.content&&n.allowHTML===o.allowHTML||Bo(a,e.props),o.arrow?l?n.arrow!==o.arrow&&(r.removeChild(l),r.appendChild(qo(o.arrow))):r.appendChild(qo(o.arrow)):l&&r.removeChild(l)}return o.className=io,o.setAttribute("data-state","hidden"),Bo(o,e.props),t.appendChild(n),n.appendChild(o),i(e.props,e.props),{popper:t,onUpdate:i}}Po.$$tippy=!0;var Wo=1,$o=[],Ro=[];function Vo(e,t){var n,o,i,r,a,l,s,c,d=No(e,Object.assign({},_o,Mo(vo(t)))),u=!1,p=!1,f=!1,h=!1,m=[],g=fo(z,d.interactiveDebounce),v=Wo++,b=(c=d.plugins).filter(function(e,t){return c.indexOf(e)===t}),y={id:v,reference:e,popper:bo(),popperInstance:null,props:d,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},plugins:b,clearDelayTimeouts:function(){clearTimeout(n),clearTimeout(o),cancelAnimationFrame(i)},setProps:function(t){if(!y.state.isDestroyed){N("onBeforeUpdate",[y,t]),Y();var n=y.props,o=No(e,Object.assign({},n,vo(t),{ignoreAttributes:!0}));y.props=o,H(),n.interactiveDebounce!==o.interactiveDebounce&&(B(),g=fo(z,o.interactiveDebounce)),n.triggerTarget&&!o.triggerTarget?ho(n.triggerTarget).forEach(function(e){e.removeAttribute("aria-expanded")}):o.triggerTarget&&e.removeAttribute("aria-expanded"),q(),M(),k&&k(n,o),y.popperInstance&&(J(),Q().forEach(function(e){requestAnimationFrame(e._tippy.popperInstance.forceUpdate)})),N("onAfterUpdate",[y,t])}},setContent:function(e){y.setProps({content:e})},show:function(){var e=y.state.isVisible,t=y.state.isDestroyed,n=!y.state.isEnabled,o=Co.isTouch&&!y.props.touch,i=co(y.props.duration,0,_o.duration);if(!(e||t||n||o||O().hasAttribute("disabled")||(N("onShow",[y],!1),!1===y.props.onShow(y)))){if(y.state.isVisible=!0,A()&&(x.style.visibility="visible"),M(),$(),y.state.isMounted||(x.style.transition="none"),A()){var r=_();wo([r.box,r.content],0)}var a,s,c;l=function(){var e;if(y.state.isVisible&&!h){if(h=!0,x.offsetHeight,x.style.transition=y.props.moveTransition,A()&&y.props.animation){var t=_(),n=t.box,o=t.content;wo([n,o],i),xo([n,o],"visible")}L(),q(),mo(Ro,y),null==(e=y.popperInstance)||e.forceUpdate(),N("onMount",[y]),y.props.animation&&A()&&function(e){V(e,function(){y.state.isShown=!0,N("onShown",[y])})}(i)}},s=y.props.appendTo,c=O(),(a=y.props.interactive&&s===so||"parent"===s?c.parentNode:po(s,[c])).contains(x)||a.appendChild(x),y.state.isMounted=!0,J()}},hide:function(){var e=!y.state.isVisible,t=y.state.isDestroyed,n=!y.state.isEnabled,o=co(y.props.duration,1,_o.duration);if(!(e||t||n)&&(N("onHide",[y],!1),!1!==y.props.onHide(y))){if(y.state.isVisible=!1,y.state.isShown=!1,h=!1,u=!1,A()&&(x.style.visibility="hidden"),B(),R(),M(!0),A()){var i=_(),r=i.box,a=i.content;y.props.animation&&(wo([r,a],o),xo([r,a],"hidden"))}L(),q(),y.props.animation?A()&&function(e,t){V(e,function(){!y.state.isVisible&&x.parentNode&&x.parentNode.contains(x)&&t()})}(o,y.unmount):y.unmount()}},hideWithInteractivity:function(e){T().addEventListener("mousemove",g),mo($o,g),g(e)},enable:function(){y.state.isEnabled=!0},disable:function(){y.hide(),y.state.isEnabled=!1},unmount:function(){y.state.isVisible&&y.hide(),y.state.isMounted&&(Z(),Q().forEach(function(e){e._tippy.unmount()}),x.parentNode&&x.parentNode.removeChild(x),Ro=Ro.filter(function(e){return e!==y}),y.state.isMounted=!1,N("onHidden",[y]))},destroy:function(){y.state.isDestroyed||(y.clearDelayTimeouts(),y.unmount(),Y(),delete e._tippy,y.state.isDestroyed=!0,N("onDestroy",[y]))}};if(!d.render)return y;var w=d.render(y),x=w.popper,k=w.onUpdate;x.setAttribute("data-tippy-root",""),x.id="tippy-"+y.id,y.popper=x,e._tippy=y,x._tippy=y;var E=b.map(function(e){return e.fn(y)}),C=e.hasAttribute("aria-expanded");return H(),q(),M(),N("onCreate",[y]),d.showOnCreate&&ee(),x.addEventListener("mouseenter",function(){y.props.interactive&&y.state.isVisible&&y.clearDelayTimeouts()}),x.addEventListener("mouseleave",function(){y.props.interactive&&y.props.trigger.indexOf("mouseenter")>=0&&T().addEventListener("mousemove",g)}),y;function S(){var e=y.props.touch;return Array.isArray(e)?e:[e,0]}function D(){return"hold"===S()[0]}function A(){var e;return!(null==(e=y.props.render)||!e.$$tippy)}function O(){return s||e}function T(){var e,t,n=O().parentNode;return n?null!=(t=ho(n)[0])&&null!=(e=t.ownerDocument)&&e.body?t.ownerDocument:document:document}function _(){return jo(x)}function I(e){return y.state.isMounted&&!y.state.isVisible||Co.isTouch||r&&"focus"===r.type?0:co(y.props.delay,e?0:1,_o.delay)}function M(e){void 0===e&&(e=!1),x.style.pointerEvents=y.props.interactive&&!e?"":"none",x.style.zIndex=""+y.props.zIndex}function N(e,t,n){var o;void 0===n&&(n=!0),E.forEach(function(n){n[e]&&n[e].apply(n,t)}),n&&(o=y.props)[e].apply(o,t)}function L(){var t=y.props.aria;if(t.content){var n="aria-"+t.content,o=x.id;ho(y.props.triggerTarget||e).forEach(function(e){var t=e.getAttribute(n);if(y.state.isVisible)e.setAttribute(n,t?t+" "+o:o);else{var i=t&&t.replace(o,"").trim();i?e.setAttribute(n,i):e.removeAttribute(n)}})}}function q(){!C&&y.props.aria.expanded&&ho(y.props.triggerTarget||e).forEach(function(e){y.props.interactive?e.setAttribute("aria-expanded",y.state.isVisible&&e===O()?"true":"false"):e.removeAttribute("aria-expanded")})}function B(){T().removeEventListener("mousemove",g),$o=$o.filter(function(e){return e!==g})}function j(t){if(!Co.isTouch||!f&&"mousedown"!==t.type){var n=t.composedPath&&t.composedPath()[0]||t.target;if(!y.props.interactive||!Eo(x,n)){if(ho(y.props.triggerTarget||e).some(function(e){return Eo(e,n)})){if(Co.isTouch)return;if(y.state.isVisible&&y.props.trigger.indexOf("click")>=0)return}else N("onClickOutside",[y,t]);!0===y.props.hideOnClick&&(y.clearDelayTimeouts(),y.hide(),p=!0,setTimeout(function(){p=!1}),y.state.isMounted||R())}}}function P(){f=!0}function W(){f=!1}function $(){var e=T();e.addEventListener("mousedown",j,!0),e.addEventListener("touchend",j,lo),e.addEventListener("touchstart",W,lo),e.addEventListener("touchmove",P,lo)}function R(){var e=T();e.removeEventListener("mousedown",j,!0),e.removeEventListener("touchend",j,lo),e.removeEventListener("touchstart",W,lo),e.removeEventListener("touchmove",P,lo)}function V(e,t){var n=_().box;function o(e){e.target===n&&(ko(n,"remove",o),t())}if(0===e)return t();ko(n,"remove",a),ko(n,"add",o),a=o}function F(t,n,o){void 0===o&&(o=!1),ho(y.props.triggerTarget||e).forEach(function(e){e.addEventListener(t,n,o),m.push({node:e,eventType:t,handler:n,options:o})})}function H(){var e;D()&&(F("touchstart",X,{passive:!0}),F("touchend",U,{passive:!0})),(e=y.props.trigger,e.split(/\s+/).filter(Boolean)).forEach(function(e){if("manual"!==e)switch(F(e,X),e){case"mouseenter":F("mouseleave",U);break;case"focus":F(To?"focusout":"blur",K);break;case"focusin":F("focusout",K)}})}function Y(){m.forEach(function(e){var t=e.node,n=e.eventType,o=e.handler,i=e.options;t.removeEventListener(n,o,i)}),m=[]}function X(e){var t,n=!1;if(y.state.isEnabled&&!G(e)&&!p){var o="focus"===(null==(t=r)?void 0:t.type);r=e,s=e.currentTarget,q(),!y.state.isVisible&&uo(e,"MouseEvent")&&$o.forEach(function(t){return t(e)}),"click"===e.type&&(y.props.trigger.indexOf("mouseenter")<0||u)&&!1!==y.props.hideOnClick&&y.state.isVisible?n=!0:ee(e),"click"===e.type&&(u=!n),n&&!o&&te(e)}}function z(e){var t=e.target,n=O().contains(t)||x.contains(t);if("mousemove"!==e.type||!n){var o=Q().concat(x).map(function(e){var t,n=null==(t=e._tippy.popperInstance)?void 0:t.state;return n?{popperRect:e.getBoundingClientRect(),popperState:n,props:d}:null}).filter(Boolean);(function(e,t){var n=t.clientX,o=t.clientY;return e.every(function(e){var t=e.popperRect,i=e.popperState,r=e.props.interactiveBorder,a=i.placement.split("-")[0],l=i.modifiersData.offset;if(!l)return!0;var s="bottom"===a?l.top.y:0,c="top"===a?l.bottom.y:0,d="right"===a?l.left.x:0,u="left"===a?l.right.x:0,p=t.top-o+s>r,f=o-t.bottom-c>r,h=t.left-n+d>r,m=n-t.right-u>r;return p||f||h||m})})(o,e)&&(B(),te(e))}}function U(e){G(e)||y.props.trigger.indexOf("click")>=0&&u||(y.props.interactive?y.hideWithInteractivity(e):te(e))}function K(e){y.props.trigger.indexOf("focusin")<0&&e.target!==O()||y.props.interactive&&e.relatedTarget&&x.contains(e.relatedTarget)||te(e)}function G(e){return!!Co.isTouch&&D()!==e.type.indexOf("touch")>=0}function J(){Z();var t=y.props,n=t.popperOptions,o=t.placement,i=t.offset,r=t.getReferenceClientRect,a=t.moveTransition,s=A()?jo(x).arrow:null,c=r?{getBoundingClientRect:r,contextElement:r.contextElement||O()}:e,d=[{name:"offset",options:{offset:i}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!a}},{name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(e){var t=e.state;if(A()){var n=_().box;["placement","reference-hidden","escaped"].forEach(function(e){"placement"===e?n.setAttribute("data-placement",t.placement):t.attributes.popper["data-popper-"+e]?n.setAttribute("data-"+e,""):n.removeAttribute("data-"+e)}),t.attributes.popper={}}}}];A()&&s&&d.push({name:"arrow",options:{element:s,padding:3}}),d.push.apply(d,(null==n?void 0:n.modifiers)||[]),y.popperInstance=oo(c,x,Object.assign({},n,{placement:o,onFirstUpdate:l,modifiers:d}))}function Z(){y.popperInstance&&(y.popperInstance.destroy(),y.popperInstance=null)}function Q(){return go(x.querySelectorAll("[data-tippy-root]"))}function ee(e){y.clearDelayTimeouts(),e&&N("onTrigger",[y,e]),$();var t=I(!0),o=S(),i=o[0],r=o[1];Co.isTouch&&"hold"===i&&r&&(t=r),t?n=setTimeout(function(){y.show()},t):y.show()}function te(e){if(y.clearDelayTimeouts(),N("onUntrigger",[y,e]),y.state.isVisible){if(!(y.props.trigger.indexOf("mouseenter")>=0&&y.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(e.type)>=0&&u)){var t=I(!1);t?o=setTimeout(function(){y.state.isVisible&&y.hide()},t):i=requestAnimationFrame(function(){y.hide()})}}else R()}}function Fo(e,t){void 0===t&&(t={});var n=_o.plugins.concat(t.plugins||[]);document.addEventListener("touchstart",Do,lo),window.addEventListener("blur",Oo);var o,i=Object.assign({},t,{plugins:n}),r=(o=e,yo(o)?[o]:function(e){return uo(e,"NodeList")}(o)?go(o):Array.isArray(o)?o:go(document.querySelectorAll(o))).reduce(function(e,t){var n=t&&Vo(t,i);return n&&e.push(n),e},[]);return yo(e)?r[0]:r}Fo.defaultProps=_o,Fo.setDefaultProps=function(e){Object.keys(e).forEach(function(t){_o[t]=e[t]})},Fo.currentInput=Co,Object.assign({},Fn,{effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow)}}),Fo.setDefaultProps({render:Po});const Ho=Fo;class Yo extends xt{constructor(e,t,n,o,i,r){var a,l,s;i=i||[];let c=null;(r=r||{})&&(null==r?void 0:r.nonBlockErrors)&&(c=Ct("ul",{class:"field-errors"},null===(a=null==r?void 0:r.nonBlockErrors)||void 0===a?void 0:a.map(e=>Ct("li",{class:"field-error"},e))));const d=Ot({panelId:`${n}--panel`,class:"sequence-block",allowPanelLink:!!e.meta.label,heading:e.meta.label?Ct("div",{class:"sequence-block-field-heading"},Ct("label",{for:o,class:"sequence-block-field-heading-label"},e.meta.label,":")):null,helpText:e.meta.helpText?Ct("div",{class:"field-help"},e.meta.helpText):null,errors:c,attrs:{"data-controller":"sortable"}});Mt(t,d.hasAttribute.bind(d),d.body.setAttribute.bind(d.body)),t.replaceWith(d),super(e,n,d),this.items=[],this.id=o,d.body.appendChild(Ct("button",{type:"button",class:"sequence-block-add-button","aria-label":window.i18n.gettext("Add %s",this.block.meta.label||window.i18n.gettext("item")),"aria-expanded":"false",onClick:this._chooseTypeClick.bind(this,null)},St("icon-plus",{title:window.i18n.gettext("Add %s",this.block.meta.label||window.i18n.gettext("item"))}))),this.totalInput=d.body.appendChild(Ct("input",{type:"hidden","data-sequence-block-total":!0,name:`${n}--total`,value:String((null==i?void 0:i.length)||0)})),this.itemWrapper=d.body.appendChild(Ct("div",{"data-sequence-block-items":!0,class:"sequence-block-items","data-sortable-target":"items"}));for(let e=0;e<((null==i?void 0:i.length)||0);e++)this._createChild(e,e,o,n,i[e],(null===(s=null===(l=null==r?void 0:r.errors)||void 0===l?void 0:l[e])||void 0===s?void 0:s[0])||null,!1)}move(e,t,n){null==n||n.preventDefault();const o=`#${e}--block`,i=this.itemWrapper.querySelector(o);if(!i)return void console.warn("Couldn't find item to move",o);const r=window.Stimulus.getControllerForElementAndIdentifier(this.element,"sortable");r?r.moveItem(i,t):console.warn("Couldn't find sortable controller for list block",this.element)}_createChild(e,t,n,o,i,r,a=!0){var l=this.block.childBlocks.get(i.type);if(!l)return void console.error(`No child block of type ${i.type} found in StreamBlock ${this.block.name}`);i.data||(i.data=this.block.defaults[i.type]||null);let s=null;a&&(s=new Tt({duration:300,onAdded:e=>{e.style.transition="opacity 300ms ease"},onFinished:e=>{e.style.transition="",e.style||e.removeAttribute("style")},animFrom:{opacity:"0"},animTo:{opacity:"1"}}));const c=`${n}-${e}`,d=`${o}-${e}`,u=`${o}-id-${e}`,p=`${o}-order-${e}`,f=`${o}-${e}--deleted`,h=`${o}-${e}--type`,m=`${d}--panel`,g=`${d}--heading-index`,v=Ct("div",{"data-sequence-block-field":!0,id:d+"--block","data-index":String(t),"data-sortable-target":"item","data-replace":`#${p};#${g}+;[data-index]`,class:"sequence-block-field"},Ct("input",{type:"hidden",id:u,name:u,value:i.id}),Ct("input",{type:"hidden",id:p,name:p,value:String(t)}),Ct("input",{type:"hidden",id:f,name:f,value:""}),Ct("input",{type:"hidden",id:h,name:h,value:i.type}),Ot({panelId:m,heading:Ct("div",{class:"sequence-block-field-heading"},l.meta.label?Ct("label",{for:u,class:"sequence-block-field-heading-label"},l.meta.label,":"):null,Ct("span",{id:g,class:"sequence-block-field-heading-index"},String(t+1))),children:Ct("div",{"data-sequence-block-field-content":!0,class:"sequence-block-field-content"},Ct("div",{"data-sequence-block-field-controls":!0,class:"sequence-block-field-controls"},Ct("button",{type:"button",class:"sequence-block-field-move-up-button","aria-label":window.i18n.gettext("Move %s up",l.meta.label||window.i18n.gettext("item")),onClick:this.move.bind(this,d,"up")},St("icon-arrow-up",{title:window.i18n.gettext("Move %s up",l.meta.label||window.i18n.gettext("item"))})),Ct("button",{type:"button",class:"sequence-block-field-move-down-button","aria-label":window.i18n.gettext("Move %s down",l.meta.label||window.i18n.gettext("item")),onClick:this.move.bind(this,d,"down")},St("icon-arrow-down",{title:window.i18n.gettext("Move %s down",l.meta.label||window.i18n.gettext("item"))})),Ct("button",{type:"button",class:"sequence-block-field-drag-handle","aria-label":window.i18n.gettext("Drag %s to reorder",l.meta.label||window.i18n.gettext("item"))},St("icon-grip-horizontal",{title:window.i18n.gettext("Drag %s to reorder",l.meta.label||window.i18n.gettext("item"))}))),Ct("div",{"data-sequence-block-field-placeholder":!0}),Ct("div",{"data-sequence-block-field-actions":!0,class:"sequence-block-field-actions"},Ct("div",{"data-sequence-block-field-actions-group":!0,class:"sequence-block-field-actions-group"},Ct("div",{"data-sequence-block-field-delete":!0,class:"sequence-block-field-delete"},Ct("button",{type:"button","data-action":"delete",class:"sequence-block-field-delete-button sequence-block-field-actions-text",onClick:this._onDeleteClick.bind(this,d)},St("icon-trash"))),Ct("div",{"data-sequence-block-field-add":!0,class:"sequence-block-field-add"},Ct("button",{type:"button","data-action":"add",class:"sequence-block-field-add-button sequence-block-field-actions-text",onClick:this._chooseTypeClick.bind(this,d)},St("icon-plus"))))))}));a&&s.addElement(v),0===t?this.itemWrapper.prepend(v):t>=this.items.length?this.itemWrapper.appendChild(v):this.itemWrapper.insertBefore(v,this.itemWrapper.children[t]);const b={id:i.id,type:i.type,block:l.render(v.querySelector("[data-sequence-block-field-placeholder]"),c,d,i.data,r)};return this.items.push(b),a&&s.start(),v}_onDeleteClick(e,t){null==t||t.preventDefault();const n=`#${e}--block`,o=this.itemWrapper.querySelector(n);if(!o)return void console.warn("Couldn't find item to delete",n);if(this.activeItems<=1&&this.block.meta.required||this.block.meta.minNum&&this.activeItems<=this.block.meta.minNum)return console.warn("Can't delete item, minimum reached"),void _t(o);const i=o.querySelector(`#${e}--deleted`);if(!i)return void console.warn("Couldn't find deleted input",`#${e}--deleted`);o.style.display="none",i.value="1",this.activeItems-=1,_t(this.itemWrapper,{color:"orange",duration:300,iters:1,delay:20});const r=window.Stimulus.getControllerForElementAndIdentifier(this.element,"sortable");r?r.reOrderItems():console.warn("Couldn't find sortable controller for list block",this.element)}_chooseTypeClick(e,t){var n;if(null==t||t.preventDefault(),1===this.block.childBlocks.size){const n=Array.from(this.block.childBlocks.keys())[0];return void this._onAddClick(e,n,t)}null===(n=this.dropdown)||void 0===n||n.destroy(),this.dropdown=Ho(t.currentTarget,{content:this._renderTypeMenu(e),allowHTML:!0,interactive:!0,trigger:"manual",theme:"dropdown",arrow:!0,maxWidth:350,placement:"bottom"}),this.dropdown.show()}_renderTypeMenu(e){return Ct("div",{class:"dropdown"},Ct("div",{class:"sequence-block-add-dropdown dropdown__content"},Array.from(this.block.childBlocks.entries()).map(([t,n])=>Ct("button",{type:"button",class:"sequence-block-add-type-button",onClick:this._onAddClick.bind(this,e,t),"data-block-type":t},n.meta.label||t))))}_onAddClick(e,t,n){var o;if(null==n||n.preventDefault(),n.ctrlKey||n.metaKey||(null===(o=this.dropdown)||void 0===o||o.destroy(),this.dropdown=null),this.block.meta.maxNum&&this.activeItems>=this.block.meta.maxNum)return console.warn("Can't add item, maximum reached"),void _t(this.itemWrapper);let i=0;if(e){e=`#${e}--block`;const t=this.itemWrapper.querySelector(e);if(!t)return void console.warn("Couldn't find item to add",e);i=parseInt(t.dataset.index||"0",10)+1}const r={id:"",type:t,data:null};this.block.defaults[t]&&(r.data=this.block.defaults[t]),_t(this._createChild(this.items.length,i,this.id,this.name,r,null),{color:"green",duration:300,iters:1,delay:100}),this.totalInput.value=String(this.items.length),this.activeItems+=1}}class Xo extends kt{constructor(e,t,n,o){super(),this.name=e,this.meta=o,this.childBlocks=new Map,this.defaults=n;for(let e=0;e<t.length;e++)this.childBlocks.set(t[e].name,t[e].block)}render(e,t,n,o,i){return new Yo(this,e,n,t,o,i)}}window.blocks=new class{constructor(e){this.blocks={},this.blocks=e||{},wt.classRegistry=this.blocks}registerBlock(e,t){this.blocks[e]=t}initBlock(...e){return new(0,this.blocks[e.blockType])(...e)}},window.telepath.register("django.widgets.Widget",Rt),window.telepath.register("django.widgets.SelectWidget",zt),window.telepath.register("django.widgets.RadioSelect",Yt),window.telepath.register("django.widgets.CheckboxInput",Ft),window.telepath.register("django.blocks.FieldBlock",Bt),window.blocks.registerBlock("django.blocks.field-block",Bt),window.telepath.register("django.blocks.ListBlock",Lt),window.blocks.registerBlock("django.blocks.list-block",Lt),window.telepath.register("django.blocks.StructBlock",Pt),window.blocks.registerBlock("django.blocks.struct-block",Pt),window.telepath.register("django.blocks.StreamBlock",Xo),window.blocks.registerBlock("django.blocks.stream-block",Xo),window.AdminSite.registerController("sortable",bt),window.AdminSite.registerController("block",wt)})();