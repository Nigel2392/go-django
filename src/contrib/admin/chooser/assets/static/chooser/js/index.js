(()=>{"use strict";function t(t){return t.replace(/(?:[_-])([a-z0-9])/g,(t,e)=>e.toUpperCase())}function e(t){return t.charAt(0).toUpperCase()+t.slice(1)}function r(t){return null!=t}function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function o(t,e){const r=s(t);return Array.from(r.reduce((t,r)=>(function(t,e){const r=t[e];return Array.isArray(r)?r:[]}(r,e).forEach(e=>t.add(e)),t),new Set))}function s(t){const e=[];for(;t;)e.push(t),t=Object.getPrototypeOf(t);return e.reverse()}function i(t){return t.reduce((t,[e,r])=>Object.assign(Object.assign({},t),{[e]:r}),{})}function a(t,e,r){return t.application.getControllerForElementAndIdentifier(e,r)}function l(t,e,r){let n=a(t,e,r);return n||(t.application.router.proposeToConnectScopeForElementAndIdentifier(e,r),n=a(t,e,r),n||void 0)}function u([e,o],s){return function(e){const{token:o,typeDefinition:s}=e,i=`${l=o,l.replace(/([A-Z])/g,(t,e)=>`-${e.toLowerCase()}`)}-value`,a=function(t){const{controller:e,token:n,typeDefinition:o}=t,s=function(t){const{controller:e,token:n,typeObject:o}=t,s=r(o.type),i=r(o.default),a=s&&i,l=s&&!i,u=!s&&i,f=c(o.type),h=d(t.typeObject.default);if(l)return f;if(u)return h;if(f!==h)throw new Error(`The specified default value for the Stimulus Value "${e?`${e}.${n}`:n}" must match the defined type "${f}". The provided default value of "${o.default}" is of type "${h}".`);return a?f:void 0}({controller:e,token:n,typeObject:o}),i=d(o),a=c(o),l=s||i||a;if(l)return l;throw new Error(`Unknown value type "${e?`${e}.${o}`:n}" for "${n}" value`)}(e);var l;return{type:a,key:i,name:t(i),get defaultValue(){return function(t){const e=c(t);if(e)return f[e];const r=n(t,"default"),o=n(t,"type"),s=t;if(r)return s.default;if(o){const{type:t}=s,e=c(t);if(e)return f[e]}return t}(s)},get hasCustomDefaultValue(){return void 0!==d(s)},reader:h[a],writer:g[a]||g.default}}({controller:s,token:e,typeDefinition:o})}function c(t){switch(t){case Array:return"array";case Boolean:return"boolean";case Number:return"number";case Object:return"object";case String:return"string"}}function d(t){switch(typeof t){case"boolean":return"boolean";case"number":return"number";case"string":return"string"}return Array.isArray(t)?"array":"[object Object]"===Object.prototype.toString.call(t)?"object":void 0}"function"==typeof Object.getOwnPropertySymbols||Object.getOwnPropertyNames,(()=>{function t(t){function e(){return Reflect.construct(t,arguments,new.target)}return e.prototype=Object.create(t.prototype,{constructor:{value:e}}),Reflect.setPrototypeOf(e,t),e}try{return function(){const e=t(function(){this.a.call(this)});e.prototype.a=function(){},new e}(),t}catch(t){return t=>class extends t{}}})(),Object.assign(Object.assign({enter:"Enter",tab:"Tab",esc:"Escape",space:" ",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",home:"Home",end:"End",page_up:"PageUp",page_down:"PageDown"},i("abcdefghijklmnopqrstuvwxyz".split("").map(t=>[t,t]))),i("0123456789".split("").map(t=>[t,t])));const f={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:""},h={array(t){const e=JSON.parse(t);if(!Array.isArray(e))throw new TypeError(`expected value of type "array" but instead got value "${t}" of type "${d(e)}"`);return e},boolean:t=>!("0"==t||"false"==String(t).toLowerCase()),number:t=>Number(t.replace(/_/g,"")),object(t){const e=JSON.parse(t);if(null===e||"object"!=typeof e||Array.isArray(e))throw new TypeError(`expected value of type "object" but instead got value "${t}" of type "${d(e)}"`);return e},string:t=>t},g={default:function(t){return`${t}`},array:p,object:p};function p(t){return JSON.stringify(t)}class m{constructor(t){this.context=t}static get shouldLoad(){return!0}static afterLoad(t,e){}get application(){return this.context.application}get scope(){return this.context.scope}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get targets(){return this.scope.targets}get outlets(){return this.scope.outlets}get classes(){return this.scope.classes}get data(){return this.scope.data}initialize(){}connect(){}disconnect(){}dispatch(t,{target:e=this.element,detail:r={},prefix:n=this.identifier,bubbles:o=!0,cancelable:s=!0}={}){const i=new CustomEvent(n?`${n}:${t}`:t,{detail:r,bubbles:o,cancelable:s});return e.dispatchEvent(i),i}}function y(t,e,r){return new CustomEvent("modal:"+t,{detail:{action:t,modal:e,originalEvent:r}})}m.blessings=[function(t){return o(t,"classes").reduce((t,r)=>{return Object.assign(t,(n=r,{[`${n}Class`]:{get(){const{classes:t}=this;if(t.has(n))return t.get(n);{const e=t.getAttributeName(n);throw new Error(`Missing attribute "${e}"`)}}},[`${n}Classes`]:{get(){return this.classes.getAll(n)}},[`has${e(n)}Class`]:{get(){return this.classes.has(n)}}}));var n},{})},function(t){return o(t,"targets").reduce((t,r)=>{return Object.assign(t,(n=r,{[`${n}Target`]:{get(){const t=this.targets.find(n);if(t)return t;throw new Error(`Missing target element "${n}" for "${this.identifier}" controller`)}},[`${n}Targets`]:{get(){return this.targets.findAll(n)}},[`has${e(n)}Target`]:{get(){return this.targets.has(n)}}}));var n},{})},function(t){const r=function(t,e){return s(t).reduce((t,r)=>(t.push(...function(t,e){const r=t[e];return r?Object.keys(r).map(t=>[t,r[t]]):[]}(r,e)),t),[])}(t,"values"),n={valueDescriptorMap:{get(){return r.reduce((t,e)=>{const r=u(e,this.identifier),n=this.data.getAttributeNameForKey(r.key);return Object.assign(t,{[n]:r})},{})}}};return r.reduce((t,r)=>Object.assign(t,function(t){const r=u(t,void 0),{key:n,name:o,reader:s,writer:i}=r;return{[o]:{get(){const t=this.data.get(n);return null!==t?s(t):r.defaultValue},set(t){void 0===t?this.data.delete(n):this.data.set(n,i(t))}},[`has${e(o)}`]:{get(){return this.data.has(n)||r.hasCustomDefaultValue}}}}(r)),n)},function(r){return o(r,"outlets").reduce((r,n)=>Object.assign(r,function(r){const n=t(r.replace(/--/g,"-").replace(/__/g,"_"));return{[`${n}Outlet`]:{get(){const t=this.outlets.find(r),e=this.outlets.getSelectorForOutletName(r);if(t){const e=l(this,t,r);if(e)return e;throw new Error(`The provided outlet element is missing an outlet controller "${r}" instance for host controller "${this.identifier}"`)}throw new Error(`Missing outlet element "${r}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${e}".`)}},[`${n}Outlets`]:{get(){const t=this.outlets.findAll(r);return t.length>0?t.map(t=>{const e=l(this,t,r);if(e)return e;console.warn(`The provided outlet element is missing an outlet controller "${r}" instance for host controller "${this.identifier}"`,t)}).filter(t=>t):[]}},[`${n}OutletElement`]:{get(){const t=this.outlets.find(r),e=this.outlets.getSelectorForOutletName(r);if(t)return t;throw new Error(`Missing outlet element "${r}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${e}".`)}},[`${n}OutletElements`]:{get(){return this.outlets.findAll(r)}},[`has${e(n)}Outlet`]:{get(){return this.outlets.has(r)}}}}(n)),{})}],m.targets=[],m.outlets=[],m.values={};class b extends m{connect(){this.tryClose(),this.element.modalController=this,this.element.dataset.modalController="true",this.dialog=this.element.querySelector("dialog")}disconnect(){this.dialog=null,this.element.modalController=null,this.element.dataset.modalController="false",this.element.remove()}tryClose(){var t=document.querySelectorAll("[data-controller='modal']");1!=t.length&&(console.warn("Multiple modal controllers found on the page. This may cause unexpected behavior."),t.forEach(t=>{var e;t!==this.element&&(null===(e=t.modalController)||void 0===e||e.disconnect())}))}open(t){this.dialog.showModal(),this.element.dispatchEvent(y("open",this,t))}close(t){this.dialog.close(),this.element.dispatchEvent(y("close",this,t))}}document.addEventListener("DOMContentLoaded",()=>{window.Stimulus.register("modal",b)})})();