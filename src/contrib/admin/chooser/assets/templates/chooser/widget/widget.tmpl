{{ define "widget" }}

<div class="chooser-widget {{ .Data.id }}-chooser" 
    data-controller="chooser"
    data-chooser-listurl-value="{{ .Data.urls.choose }}"
    data-chooser-createurl-value="{{ .Data.urls.create }}"
    data-chooser-updateurl-value="{{ .Data.urls.update }}"
    data-chooser-title-value="{{ .Data.title }}"
    >

    <input type="hidden" data-chooser-target="input" name="{{ .Data.name }}" id="{{ .Data.id }}" {{ if (.Data.value) }}value="{{ .Data.value }}"{{ end }}{{ safeAttrs (include (.Data.attrs) "forms/widgets/attrs.html") }}/>
    
    <div class="chooser-widget-preview" data-chooser-target="preview">
        {{ safe .Data.preview }}
    </div>

    <div class="chooser-widget-controls">
        <div data-controller="dropdown" class="dropdown">
            <button type="button" class="dropdown__toggle dropdown__toggle--icon" data-dropdown-target="toggle" aria-label="{{ Translate .Data.context "Toggle dropdown menu" }}" aria-expanded="false">
                <svg class="icon icon-dots-horizontal dropdown__toggle-icon" viewBox="0 0 16 16">
                    <path d="M4.75 8c0 .969-.813 1.75-1.75 1.75-.969 0-1.75-.781-1.75-1.75 0-.938.781-1.75 1.75-1.75.938 0 1.75.813 1.75 1.75Zm5 0c0 .969-.813 1.75-1.75 1.75-.969 0-1.75-.781-1.75-1.75 0-.938.781-1.75 1.75-1.75.938 0 1.75.813 1.75 1.75Zm1.5 0c0-.938.781-1.75 1.75-1.75.938 0 1.75.813 1.75 1.75 0 .969-.813 1.75-1.75 1.75-.969 0-1.75-.781-1.75-1.75Z"></path>
                </svg>
            </button>
            <div data-dropdown-target="content" class="dropdown__content">

                <button type="button" class="chooser-choose" data-chooser-target="open" data-action="click->chooser#open">
                    {{ Translate .Data.context "Choose" }}
                </button>

                {{ if .Data.urls.update }}
                    <button type="button" class="chooser-edit">
                        {{ Translate .Data.context "Edit" }}
                    </button>
                {{ end }}

                <button type="button" class="chooser-reset" data-chooser-target="clear" data-action="click->chooser#clear">
                    {{ Translate .Data.context "Clear" }}
                </button>

            </div>
        </div>
    </div>

    <div class="chooser-widget-modal" data-chooser-target="modal"></div>
</div>

{{ end }}