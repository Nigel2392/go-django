{{ template "base" . }}

{{ define "title" }} {{index .Data "title"}} {{end}}

{{ define "css" }}{{ end }}

{{ define "content" }}
    {{$form := index .Data "form"}}
    {{$model := index .Data "model"}}
    {{$id := index .Data "id"}}
    <form action="{{$form.URL}}" method="{{$form.Method}}" enctype="multipart/form-data"{{if $form.Disabled}}class="disabled"{{end}}>
        {{ $form.CSRFToken.Input }}
        {{ $form.Render }}
        <div class="buttons-left">
            {{if .Request.User.HasPerms (index .Data "model").Permissions.Update}}
                <button type="submit" class="admin-button-light margins-top">Save</button>
            {{end}}
            {{if .Request.User.HasPerms (index .Data "model").Permissions.Delete}}
                <a href="{{ $model.URLS.DeleteURL $id }}" class="admin-button-light danger-button margins-top">Delete</a>
            {{end}}
        </div>
    </form>
{{ end }}

{{ define "js" }}
    {{template "m2m.tmpl" .}}
{{ end }}